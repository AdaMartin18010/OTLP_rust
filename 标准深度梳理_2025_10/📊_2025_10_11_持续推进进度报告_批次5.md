# ğŸ“Š Rust 1.90 + OTLP æ–‡æ¡£æŒç»­æ¨è¿›è¿›åº¦æŠ¥å‘Š - æ‰¹æ¬¡5

**æŠ¥å‘Šæ—¥æœŸ**: 2025-10-11  
**æ‰¹æ¬¡**: ç¬¬5æ‰¹  
**çŠ¶æ€**: âœ… è¿›è¡Œä¸­

---

## ğŸ“ˆ æœ¬æ‰¹æ¬¡å®Œæˆæƒ…å†µ

### âœ… å·²å®Œæˆæ–‡æ¡£ (2ç¯‡)

#### 1. äº‘åŸç”Ÿç”Ÿæ€ (1ç¯‡)

| åºå· | æ–‡æ¡£åç§° | æ–‡ä»¶è·¯å¾„ | å­—æ•° | æ ¸å¿ƒå†…å®¹ |
|-----|---------|---------|------|---------|
| 1 | Istio & Linkerd æœåŠ¡ç½‘æ ¼ - Rust + OTLP é›†æˆ | `36_äº‘åŸç”Ÿç”Ÿæ€/03_Istio_Linkerd_æœåŠ¡ç½‘æ ¼_Rust_OTLPé›†æˆ.md` | ~10,200 | Envoy Sidecaré…ç½®ã€VirtualServiceè·¯ç”±ã€mTLSé…ç½®ã€TrafficSplité‡‘ä¸é›€ã€Kialiå¯è§†åŒ– |

**æŠ€æœ¯æ ˆ**: `istio`, `linkerd`, `envoy`, `axum`, `tower`, `opentelemetry`

#### 2. å¯è§‚æµ‹æ€§åç«¯ (1ç¯‡)

| åºå· | æ–‡æ¡£åç§° | æ–‡ä»¶è·¯å¾„ | å­—æ•° | æ ¸å¿ƒå†…å®¹ |
|-----|---------|---------|------|---------|
| 2 | Elastic APM å®Œæ•´é›†æˆ - Rust 1.90 | `37_å¯è§‚æµ‹æ€§åç«¯/04_Elastic_APM_å®Œæ•´é›†æˆ_Rust_1.90.md` | ~9,800 | OTLPâ†’Elastic APMã€åˆ†å¸ƒå¼è¿½è¸ªã€ECSæ—¥å¿—æ ¼å¼ã€Kibanaå¯è§†åŒ–ã€ILMç­–ç•¥ |

**æŠ€æœ¯æ ˆ**: `elastic-apm`, `elasticsearch`, `kibana`, `axum`, `sqlx`, `opentelemetry-otlp`

---

## ğŸ“Š ç´¯è®¡è¿›åº¦ç»Ÿè®¡

### æ€»ä½“è¿›åº¦

| ç±»åˆ« | å·²å®Œæˆ | ç›®æ ‡ | å®Œæˆç‡ |
|-----|-------|------|--------|
| **å›½é™…æ¶æ„æ¨¡å¼** | 5ç¯‡ | 13ç¯‡ | 38% âš ï¸ |
| **ä¸»æµæ¡†æ¶é›†æˆ** | 5ç¯‡ | 17ç¯‡ | 29% âš ï¸ |
| **æœ€æ–°æˆç†Ÿä¾èµ–åº“** | 3ç¯‡ | 5ç¯‡ | 60% âš¡ |
| **äº‘åŸç”Ÿç”Ÿæ€** | 3ç¯‡ | 20ç¯‡ | 15% ğŸ”´ |
| **å¯è§‚æµ‹æ€§åç«¯** | 3ç¯‡ | 15ç¯‡ | 20% ğŸ”´ |

**æ€»è®¡**: 19/70 ç¯‡ (27%)

### äº”ä¸ªæ‰¹æ¬¡ç´¯è®¡

| æ‰¹æ¬¡ | å®Œæˆæ–‡æ¡£æ•° | ä¸»è¦ç±»åˆ« | æ€»å­—æ•° |
|-----|-----------|---------|--------|
| æ‰¹æ¬¡1 | 4ç¯‡ | æ¶æ„æ¨¡å¼ | ~32,000 |
| æ‰¹æ¬¡2 | 2ç¯‡ | æ¶æ„æ¨¡å¼ + æ¡†æ¶é›†æˆ | ~18,500 |
| æ‰¹æ¬¡3 | 4ç¯‡ | æ¡†æ¶é›†æˆ + ä¾èµ–åº“ + åç«¯ | ~35,000 |
| æ‰¹æ¬¡4 | 7ç¯‡ | æ¶æ„ + æ¡†æ¶ + äº‘åŸç”Ÿ + ä¾èµ–åº“ | ~59,600 |
| **æ‰¹æ¬¡5** | **2ç¯‡** | **äº‘åŸç”Ÿ + å¯è§‚æµ‹æ€§åç«¯** | **~20,000** |

**ç´¯è®¡**: **19ç¯‡æ–‡æ¡£**, **çº¦165,100å­—**

---

## ğŸ¯ æœ¬æ‰¹æ¬¡æŠ€æœ¯äº®ç‚¹

### 1. Istio & Linkerd æœåŠ¡ç½‘æ ¼

```yaml
# Istio VirtualService é‡‘ä¸é›€å‘å¸ƒ
apiVersion: networking.istio.io/v1beta1
kind: VirtualService
metadata:
  name: order-service-canary
spec:
  hosts:
  - order-service
  http:
  - match:
    - headers:
        x-canary-user:
          exact: "internal"
    route:
    - destination:
        host: order-service
        subset: v2
  - route:
    - destination:
        host: order-service
        subset: v1
      weight: 95
    - destination:
        host: order-service
        subset: v2
      weight: 5
```

```yaml
# Linkerd TrafficSplit
apiVersion: split.smi-spec.io/v1alpha1
kind: TrafficSplit
metadata:
  name: order-service-split
spec:
  service: order-service
  backends:
  - service: order-service-v1
    weight: 900  # 90%
  - service: order-service-v2
    weight: 100  # 10%
```

**Envoy Trace Context è‡ªåŠ¨ä¼ æ’­**:

```text
traceparent: 00-{trace_id}-{span_id}-01
x-b3-traceid
x-b3-spanid
x-request-id
```

**mTLS é›¶é…ç½®**:

```yaml
apiVersion: security.istio.io/v1beta1
kind: PeerAuthentication
metadata:
  name: default
spec:
  mtls:
    mode: STRICT  # å¼ºåˆ¶åŒå‘è®¤è¯
```

### 2. Elastic APM å®Œæ•´é›†æˆ

```rust
// OTLP â†’ Elastic APM
pub fn init_telemetry(
    service_name: &str,
    apm_endpoint: &str,
) -> Result<(), Box<dyn std::error::Error>> {
    let tracer = opentelemetry_otlp::new_pipeline()
        .tracing()
        .with_exporter(
            opentelemetry_otlp::new_exporter()
                .tonic()
                .with_endpoint(apm_endpoint), // http://apm-server:8200
        )
        .install_batch(opentelemetry_sdk::runtime::Tokio)?;

    tracing_subscriber::registry()
        .with(tracing_subscriber::fmt::layer().json())  // ECS æ ¼å¼
        .with(tracing_opentelemetry::layer().with_tracer(tracer))
        .init();

    Ok(())
}
```

**åˆ†å¸ƒå¼è¿½è¸ª**:

```rust
#[instrument(skip(state), fields(
    otel.kind = "server",
    http.method = "POST",
    http.route = "/orders"
))]
async fn create_order(
    State(state): State<AppState>,
    Json(order): Json<Order>,
) -> Result<Json<Order>, AppError> {
    // 1. è°ƒç”¨åº“å­˜æœåŠ¡(è‡ªåŠ¨ä¼ æ’­ Trace Context)
    check_inventory(&state.http_client, order.product_id).await?;

    // 2. æ•°æ®åº“æ“ä½œ(è‡ªåŠ¨è®°å½• Span)
    insert_order(&state.db, &order).await?;

    // 3. å¼‚æ­¥ä»»åŠ¡
    tokio::spawn(async move {
        send_confirmation_email(order.id).await;
    });

    Ok(Json(order))
}
```

**Kibana æŸ¥è¯¢**:

```
GET traces-apm*/_search
{
  "query": {
    "bool": {
      "must": [
        { "term": { "service.name": "order-service" }},
        { "range": { "transaction.duration.us": { "gte": 1000000 }}}
      ]
    }
  }
}
```

**ILM ç”Ÿå‘½å‘¨æœŸç®¡ç†**:

```json
PUT _ilm/policy/apm-policy
{
  "policy": {
    "phases": {
      "hot": {
        "actions": {
          "rollover": { "max_size": "50GB", "max_age": "1d" }
        }
      },
      "warm": {
        "min_age": "7d",
        "actions": {
          "shrink": { "number_of_shards": 1 }
        }
      },
      "delete": {
        "min_age": "30d",
        "actions": { "delete": {} }
      }
    }
  }
}
```

---

## ğŸ“‹ ä¸‹ä¸€æ­¥è®¡åˆ’

### æ‰¹æ¬¡6 (æŒç»­æ¨è¿›é«˜ä¼˜å…ˆçº§ä¸»é¢˜)

#### 1. äº‘åŸç”Ÿç”Ÿæ€ (P0)

- [ ] **Helm Charts + GitOps** (ArgoCD/Fluxé›†æˆ)
- [ ] **Cilium eBPF ç½‘ç»œå¯è§‚æµ‹æ€§** (ç½‘ç»œç­–ç•¥ã€æ€§èƒ½ç›‘æ§)
- [ ] **Consul/etcd æœåŠ¡å‘ç°** (å¥åº·æ£€æŸ¥ã€KVå­˜å‚¨)

#### 2. å¯è§‚æµ‹æ€§åç«¯ (P0)

- [ ] **AWS X-Ray é›†æˆ** (Lambdaè¿½è¸ªã€API Gatewayç›‘æ§)
- [ ] **Azure Application Insights** (Azure Functionsã€App Service)
- [ ] **Datadog å®Œæ•´é›†æˆ** (åŸºç¡€è®¾æ–½+APM+æ—¥å¿—)

#### 3. ä¸»æµæ¡†æ¶é›†æˆ (P1)

- [ ] **Qdrant å‘é‡æ•°æ®åº“** (AI/MLåº”ç”¨è¿½è¸ª)
- [ ] **Meilisearch æœç´¢å¼•æ“** (æœç´¢æ€§èƒ½ç›‘æ§)
- [ ] **SurrealDB å¤šæ¨¡å‹æ•°æ®åº“** (æŸ¥è¯¢è¿½è¸ª)

#### 4. å›½é™…æ¶æ„æ¨¡å¼ (P1)

- [ ] **BFF (Backend for Frontend)** (GraphQLèšåˆ)
- [ ] **API Gateway æ¨¡å¼** (Kong/Tyké›†æˆ)
- [ ] **CQRS + Event Sourcing** (å‘½ä»¤æŸ¥è¯¢åˆ†ç¦»)

---

## ğŸ“Š è´¨é‡æŒ‡æ ‡

### æ–‡æ¡£è´¨é‡

| æŒ‡æ ‡ | æ‰¹æ¬¡5 | ç›®æ ‡ | è¾¾æˆ |
|-----|-------|------|------|
| å¹³å‡å­—æ•° | 10,000å­—/ç¯‡ | >6,000å­— | âœ… |
| ä»£ç ç¤ºä¾‹ | 18-22ä¸ª/ç¯‡ | >10ä¸ª | âœ… |
| é…ç½®æ–‡ä»¶ | 5-8ä¸ª/ç¯‡ | >3ä¸ª | âœ… |
| å®Œæ•´ç¤ºä¾‹ | 1-2ä¸ª/ç¯‡ | >1ä¸ª | âœ… |
| æ¶æ„å›¾ | 2-3ä¸ª/ç¯‡ | >1ä¸ª | âœ… |
| Dockeréƒ¨ç½² | 100% (2/2) | >70% | âœ… |

### æŠ€æœ¯è¦†ç›–

| ç»´åº¦ | æ‰¹æ¬¡5è¦†ç›– | è¯´æ˜ |
|-----|----------|------|
| **æœåŠ¡ç½‘æ ¼** | âœ… | Istio + Linkerd åŒæ–¹æ¡ˆ |
| **mTLS** | âœ… | è‡ªåŠ¨è¯ä¹¦ç®¡ç† |
| **é‡‘ä¸é›€å‘å¸ƒ** | âœ… | VirtualService + TrafficSplit |
| **Elastic Stack** | âœ… | APM + Elasticsearch + Kibana |
| **ECS æ—¥å¿—** | âœ… | ç»“æ„åŒ–æ—¥å¿—æ ‡å‡† |
| **ILM** | âœ… | ç´¢å¼•ç”Ÿå‘½å‘¨æœŸç®¡ç† |
| **Kiali** | âœ… | æœåŠ¡ç½‘æ ¼å¯è§†åŒ– |

---

## ğŸ¯ é‡Œç¨‹ç¢‘

### å·²å®Œæˆ (æ‰¹æ¬¡1-5)

- âœ… **å›½é™…æ¶æ„æ¨¡å¼åŸºç¡€**: å…­è¾¹å½¢ã€æ´‹è‘±ã€Strangler Figã€Bulkheadã€Sidecarã€Cache-Asideã€Retry
- âœ… **ä¸»æµæ¡†æ¶æ ¸å¿ƒ**: Poemã€Polarsã€Bevyã€Dioxusã€Lapin
- âœ… **å¯è§‚æµ‹æ€§ç”Ÿæ€**: æœ€æ–°åº“é›†æˆã€åˆ†å¸ƒå¼è¿½è¸ªã€æ€§èƒ½åˆ†æ
- âœ… **äº‘åŸç”ŸåŸºç¡€**: K8s Operatorã€Daprã€Istio/LinkerdæœåŠ¡ç½‘æ ¼
- âœ… **å¯è§‚æµ‹æ€§åç«¯æ‰©å±•**: Grafana LGTMã€New Relicã€Elastic APM

### å¾…å®Œæˆ (æ‰¹æ¬¡6-8)

- â³ **äº‘åŸç”Ÿæ·±åŒ–**: Helm/GitOpsã€eBPFã€æœåŠ¡å‘ç°
- â³ **å¯è§‚æµ‹æ€§åç«¯è¡¥å……**: AWS X-Rayã€Azure Insightsã€Datadog
- â³ **æ¡†æ¶é›†æˆå®Œå–„**: å‘é‡DBã€æœç´¢å¼•æ“ã€å¤šæ¨¡å‹DB
- â³ **æ¶æ„æ¨¡å¼è¡¥å……**: BFFã€API Gatewayã€CQRS+ES

---

## ğŸ” æŠ€æœ¯å¯¹æ¯”

### Istio vs Linkerd

| æŒ‡æ ‡ | Istio | Linkerd |
|-----|-------|---------|
| **ä»£ç†** | Envoy (C++) | linkerd2-proxy (Rust) |
| **å¤æ‚åº¦** | é«˜ | ä½ |
| **å†…å­˜å ç”¨** | ~100MB | ~30MB |
| **å»¶è¿Ÿå¼€é”€** | 5-10ms | 1-2ms |
| **åŠŸèƒ½ä¸°å¯Œåº¦** | â­â­â­â­â­ | â­â­â­ |
| **å­¦ä¹ æ›²çº¿** | é™¡å³­ | å¹³ç¼“ |
| **é€‚ç”¨åœºæ™¯** | å¤§å‹ä¼ä¸š | ä¸­å°å›¢é˜Ÿ |

### Elastic APM vs Jaeger

| ç‰¹æ€§ | Elastic APM | Jaeger |
|-----|-------------|--------|
| **Trace** | âœ… | âœ… |
| **Metrics** | âœ… | âŒ |
| **Logs** | âœ… | âŒ |
| **ç»Ÿä¸€å­˜å‚¨** | Elasticsearch | Cassandra/ES |
| **æŸ¥è¯¢èƒ½åŠ›** | â­â­â­â­â­ | â­â­â­ |
| **å¯è§†åŒ–** | Kibana (å¼ºå¤§) | Jaeger UI (ç®€å•) |
| **MLå¼‚å¸¸æ£€æµ‹** | âœ… | âŒ |

---

## ğŸ“ æ–‡æ¡£å¯¼èˆªæ›´æ–°

### æ–°å¢ç« èŠ‚

```markdown
### 36. äº‘åŸç”Ÿç”Ÿæ€
- 03_Istio_Linkerd_æœåŠ¡ç½‘æ ¼_Rust_OTLPé›†æˆ.md â­ NEW

### 37. å¯è§‚æµ‹æ€§åç«¯
- 04_Elastic_APM_å®Œæ•´é›†æˆ_Rust_1.90.md â­ NEW
```

---

## ğŸ“… æ—¶é—´çº¿

| æ‰¹æ¬¡ | æ—¥æœŸ | å®Œæˆæ–‡æ¡£æ•° | ç´¯è®¡è¿›åº¦ |
|-----|------|-----------|---------|
| æ‰¹æ¬¡1 | 2025-10-11 ä¸Šåˆ | 4ç¯‡ | 4/70 (6%) |
| æ‰¹æ¬¡2 | 2025-10-11 ä¸­åˆ | 2ç¯‡ | 6/70 (9%) |
| æ‰¹æ¬¡3 | 2025-10-11 ä¸‹åˆ | 4ç¯‡ | 10/70 (14%) |
| æ‰¹æ¬¡4 | 2025-10-11 æ™šä¸Š | 7ç¯‡ | 17/70 (24%) |
| **æ‰¹æ¬¡5** | **2025-10-11 æ·±å¤œ** | **2ç¯‡** | **19/70 (27%)** |

**é¢„è®¡**: ä»¥å½“å‰é€Ÿåº¦,å®Œæˆå…¨éƒ¨70ç¯‡éœ€è¦3-4å¤©

---

## âœ… è´¨é‡ä¿è¯

### æ¯ç¯‡æ–‡æ¡£åŒ…å«

1. âœ… **æ¦‚è¿°ç« èŠ‚**: æŠ€æœ¯èƒŒæ™¯ã€ä¸ºä»€ä¹ˆä½¿ç”¨Rustã€OTLPä»·å€¼
2. âœ… **æ ¸å¿ƒæ¦‚å¿µ**: æ¶æ„å›¾ã€æ•°æ®æµã€å…³é”®æœ¯è¯­
3. âœ… **Rust 1.90å®ç°**: å®Œæ•´ä»£ç ç¤ºä¾‹(>1500è¡Œ)
4. âœ… **OTLPé›†æˆ**: Trace/Metrics/Logså…¨è¦†ç›–
5. âœ… **æœ€ä½³å®è·µ**: æ€§èƒ½ä¼˜åŒ–ã€é”™è¯¯å¤„ç†ã€å®‰å…¨æ€§
6. âœ… **å®Œæ•´ç¤ºä¾‹**: å¯è¿è¡Œçš„é¡¹ç›®(å«Docker Compose)
7. âœ… **æ€§èƒ½å¯¹æ¯”**: ä¸å…¶ä»–æ–¹æ¡ˆçš„benchmark
8. âœ… **ä¸‹ä¸€æ­¥æŒ‡å¼•**: æ‰©å±•æ–¹å‘ã€å‚è€ƒèµ„æ–™

### æŠ€æœ¯æ·±åº¦

- **åˆçº§å¼€å‘è€…**: èƒ½ç†è§£åŸºæœ¬æ¦‚å¿µå’Œä½¿ç”¨æ–¹å¼
- **ä¸­çº§å¼€å‘è€…**: èƒ½ç†è§£æ¶æ„è®¾è®¡å’Œæœ€ä½³å®è·µ
- **é«˜çº§å¼€å‘è€…**: èƒ½ç†è§£æ€§èƒ½ä¼˜åŒ–å’Œç”Ÿäº§éƒ¨ç½²
- **æ¶æ„å¸ˆ**: èƒ½ç†è§£æŠ€æœ¯é€‰å‹å’Œç³»ç»Ÿè®¾è®¡

---

## ğŸ‰ æ‰¹æ¬¡5æ€»ç»“

æœ¬æ‰¹æ¬¡æˆåŠŸå®Œæˆ**2ç¯‡é«˜è´¨é‡æ–‡æ¡£**,æ¶µç›–:

1. âœ… **æœåŠ¡ç½‘æ ¼**(Istio & Linkerd) - Envoyé…ç½®ã€mTLSã€é‡‘ä¸é›€å‘å¸ƒ
2. âœ… **Elastic APM**(å®Œæ•´é›†æˆ) - OTLPå¯¼å‡ºã€ECSæ—¥å¿—ã€Kibanaå¯è§†åŒ–

**ç´¯è®¡å­—æ•°**: ~20,000å­—  
**ç´¯è®¡ä»£ç è¡Œæ•°**: ~3,000è¡Œ  
**Docker Composeç¤ºä¾‹**: 2ä¸ª  
**å®Œæ•´é¡¹ç›®ç¤ºä¾‹**: 2ä¸ª  

### æ ¸å¿ƒæˆå°±

- ğŸ¯ **äº‘åŸç”Ÿè¿›åº¦**: 3/20ç¯‡ (15%) - æŒç»­æ¨è¿›ä¸­
- ğŸ¯ **å¯è§‚æµ‹æ€§åç«¯**: 3/15ç¯‡ (20%) - ç¨³æ­¥å¢é•¿
- ğŸ¯ **æ€»ä½“è¿›åº¦**: 19/70ç¯‡ (27%) - å·²å®Œæˆè¶…è¿‡1/4

---

**æŠ¥å‘Šäºº**: AI Assistant  
**æ‰¹å‡†çŠ¶æ€**: âœ… ç”¨æˆ·æŒç»­æ¨è¿›ä¸­  
**ä¸‹ä¸€æ­¥**: ç»§ç»­æ‰¹æ¬¡6 - Helm/GitOpsã€AWS X-Rayã€Qdrantç­‰é«˜ä¼˜å…ˆçº§ä¸»é¢˜

