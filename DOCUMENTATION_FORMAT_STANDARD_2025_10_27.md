# 文档格式统一标准 - OTLP_rust 项目

**版本**: 1.0  
**发布日期**: 2025年10月27日  
**适用范围**: 项目所有 Markdown 文档  
**状态**: 🟢 强制执行

---

## 📋 目录

- [文档格式统一标准 - OTLP\_rust 项目](#文档格式统一标准---otlp_rust-项目)
  - [📋 目录](#-目录)
  - [1. 概述](#1-概述)
    - [1.1 标准目的](#11-标准目的)
    - [1.2 适用范围](#12-适用范围)
    - [1.3 强制性要求](#13-强制性要求)
  - [2. 文档结构标准](#2-文档结构标准)
    - [2.1 基本结构](#21-基本结构)
    - [2.2 元数据区](#22-元数据区)
    - [2.3 目录（TOC）](#23-目录toc)
    - [2.4 主体内容](#24-主体内容)
    - [2.5 页脚区域](#25-页脚区域)
  - [3. 标题层级标准](#3-标题层级标准)
    - [3.1 层级规则](#31-层级规则)
    - [3.2 序号系统](#32-序号系统)
    - [3.3 标题格式](#33-标题格式)
  - [4. 目录生成标准](#4-目录生成标准)
    - [4.1 目录位置](#41-目录位置)
    - [4.2 目录格式](#42-目录格式)
    - [4.3 目录深度](#43-目录深度)
    - [4.4 自动生成工具](#44-自动生成工具)
  - [5. 内容格式标准](#5-内容格式标准)
    - [5.1 段落和换行](#51-段落和换行)
    - [5.2 列表格式](#52-列表格式)
    - [5.3 代码块](#53-代码块)
    - [5.4 引用块](#54-引用块)
    - [5.5 表格](#55-表格)
  - [6. 链接和引用标准](#6-链接和引用标准)
    - [6.1 内部链接](#61-内部链接)
    - [6.2 外部链接](#62-外部链接)
    - [6.3 图片链接](#63-图片链接)
  - [7. 特殊元素标准](#7-特殊元素标准)
    - [7.1 Emoji 使用](#71-emoji-使用)
    - [7.2 徽章（Badges）](#72-徽章badges)
    - [7.3 提示框](#73-提示框)
    - [7.4 折叠区域](#74-折叠区域)
  - [8. 文档类型模板](#8-文档类型模板)
    - [8.1 README 文档模板](#81-readme-文档模板)
    - [8.2 技术文档模板](#82-技术文档模板)
    - [8.3 API 文档模板](#83-api-文档模板)
    - [8.4 教程文档模板](#84-教程文档模板)
  - [9. 质量检查清单](#9-质量检查清单)
    - [9.1 结构检查](#91-结构检查)
    - [9.2 格式检查](#92-格式检查)
    - [9.3 内容检查](#93-内容检查)
  - [10. 工具和自动化](#10-工具和自动化)
    - [10.1 推荐工具](#101-推荐工具)
    - [10.2 VSCode 配置](#102-vscode-配置)
    - [10.3 自动化脚本](#103-自动化脚本)
  - [附录 A: 完整示例文档](#附录-a-完整示例文档)
  - [附录 B: 常见问题](#附录-b-常见问题)

---

## 1. 概述

### 1.1 标准目的

本标准旨在：
- ✅ 统一项目所有文档的格式和结构
- ✅ 提高文档的可读性和可维护性
- ✅ 确保文档的专业性和一致性
- ✅ 简化文档的编写和审核流程

### 1.2 适用范围

本标准适用于：
- 📁 `docs/` 目录下所有文档
- 📁 `crates/*/docs/` 目录下所有文档
- 📁 根目录的核心文档（README.md, CONTRIBUTING.md 等）
- 📁 分析报告和技术文档

### 1.3 强制性要求

以下要素为 **强制性要求**：
1. ✅ **元数据区** - 必须包含版本、日期、状态
2. ✅ **目录（TOC）** - 超过 3 个一级标题的文档必须有目录
3. ✅ **序号系统** - 多级标题必须使用统一的序号
4. ✅ **标题层级** - 正确使用 `#` 的层级（最多 6 级）
5. ✅ **页脚信息** - 包含版本、更新日期、维护者

---

## 2. 文档结构标准

### 2.1 基本结构

所有文档应遵循以下基本结构：

```markdown
# 文档标题

**版本**: X.X
**最后更新**: YYYY年MM月DD日
**状态**: 🟢/🟡/🔴

> **简介**: 一句话说明文档内容

---

## 📋 目录

[自动生成的目录]

---

## 1. 第一个主题

### 1.1 子主题

#### 1.1.1 详细内容

[正文内容]

---

## 2. 第二个主题

[更多内容]

---

## 附录

[可选的附录内容]

---

**文档版本**: X.X
**维护者**: 团队名称
**最后更新**: YYYY年MM月DD日
```

### 2.2 元数据区

文档开头必须包含元数据：

```markdown
# 文档标题

**版本**: 1.0
**最后更新**: 2025年10月27日
**Rust 版本**: 1.90.0 (可选，技术文档需要)
**状态**: 🟢 活跃维护 / 🟡 计划中 / 🔴 已废弃 / 🗄️ 已归档

> **简介**: 简短描述文档的目的和内容（1-2句话）
```

**状态图标说明**：
- 🟢 活跃维护：正在积极更新的文档
- 🟡 计划中：正在编写或计划更新
- 🔴 已废弃：不再维护的文档
- 🗄️ 已归档：历史文档，仅供参考

### 2.3 目录（TOC）

#### 强制要求
当文档包含 **3 个或以上一级标题** 时，必须包含目录。

#### 目录格式
```markdown
## 📋 目录

- [文档标题](#文档标题)
  - [📋 目录](#-目录)
  - [1. 第一个主题](#1-第一个主题)
    - [1.1 子主题](#11-子主题)
      - [1.1.1 详细内容](#111-详细内容)
  - [2. 第二个主题](#2-第二个主题)
  - [附录 A: 示例](#附录-a-示例)

---
```

#### 目录生成工具
推荐使用 VSCode 插件自动生成：
- **Markdown All in One** - 快捷键 `Ctrl+Shift+P` → `Create Table of Contents`

### 2.4 主体内容

#### 章节分隔
使用三个连字符分隔主要章节：

```markdown
## 1. 第一章

内容...

---

## 2. 第二章

内容...
```

#### 段落格式
- 段落之间使用一个空行分隔
- 列表项之间不需要空行
- 代码块前后各留一个空行

### 2.5 页脚区域

文档结尾必须包含页脚信息：

```markdown
---

**文档版本**: 1.0
**维护者**: OTLP Rust 团队
**最后更新**: 2025年10月27日
**反馈**: [提交 Issue](https://github.com/...)
```

---

## 3. 标题层级标准

### 3.1 层级规则

```markdown
# 一级标题 - 文档标题（仅一个）

## 二级标题 - 主要章节

### 三级标题 - 章节的子主题

#### 四级标题 - 详细内容

##### 五级标题 - 更详细的内容（谨慎使用）

###### 六级标题 - 最小单位（尽量避免）
```

**最佳实践**：
- ✅ 大多数文档使用 2-4 级标题即可
- ⚠️ 避免使用 5-6 级标题（说明结构需要优化）
- ❌ 不要跳级（如从 `##` 直接到 `####`）

### 3.2 序号系统

#### 主标题序号（必须）

```markdown
## 1. 概述
## 2. 安装指南
## 3. 快速开始
## 4. 高级用法
## 5. 故障排查
```

#### 子标题序号（必须）

```markdown
## 1. 概述

### 1.1 项目简介
### 1.2 核心特性
### 1.3 使用场景

## 2. 安装指南

### 2.1 系统要求
### 2.2 安装步骤

#### 2.2.1 Windows 平台
#### 2.2.2 Linux 平台
#### 2.2.3 macOS 平台
```

#### 特殊章节（可选序号）

以下章节可以不使用数字序号，使用描述性标题：

```markdown
## 📋 目录
## ✅ 快速开始
## 🔧 配置
## 📊 示例
## 🔗 相关资源
## 附录 A: 术语表
## 附录 B: 参考资料
```

### 3.3 标题格式

#### 正确示例 ✅

```markdown
## 1. 概述

### 1.1 项目简介

这是正文内容...

### 1.2 核心特性

特性列表：
- 高性能
- 类型安全
```

#### 错误示例 ❌

```markdown
## 1.概述                    # ❌ 序号后缺少空格

### 1. 1 项目简介            # ❌ 序号格式错误

####1.2核心特性             # ❌ # 后缺少空格，序号无空格

## 1  概述                   # ❌ 序号后多个空格
```

---

## 4. 目录生成标准

### 4.1 目录位置

目录应放在元数据区之后、正文之前：

```markdown
# 文档标题

**版本**: 1.0
...

> **简介**: ...

---

## 📋 目录

[目录内容]

---

## 1. 正文开始
```

### 4.2 目录格式

#### 基本格式

```markdown
## 📋 目录

- [文档标题](#文档标题)
  - [📋 目录](#-目录)
  - [1. 第一章](#1-第一章)
    - [1.1 第一节](#11-第一节)
    - [1.2 第二节](#12-第二节)
  - [2. 第二章](#2-第二章)
```

#### 注意事项
- ✅ 使用 2 个空格缩进表示层级
- ✅ 锚点使用小写，空格替换为 `-`
- ✅ 特殊字符（如 emoji）在锚点中转义
- ✅ 目录层级不超过 4 级

### 4.3 目录深度

根据文档长度确定目录深度：

| 文档长度 | 推荐目录深度 |
|---------|------------|
| < 200 行 | 2 级（## ###） |
| 200-500 行 | 3 级（## ### ####） |
| 500-1000 行 | 3-4 级 |
| > 1000 行 | 考虑拆分文档 |

### 4.4 自动生成工具

#### VSCode 插件

**Markdown All in One**
- 快捷键：`Ctrl+Shift+P` → `Create Table of Contents`
- 自动更新：保存文件时自动更新目录

**配置** (settings.json):
```json
{
  "markdown.extension.toc.levels": "2..4",
  "markdown.extension.toc.unorderedList.marker": "-"
}
```

#### 命令行工具

```bash
# 安装 doctoc
npm install -g doctoc

# 生成目录
doctoc README.md --github

# 批量生成
find . -name "*.md" -exec doctoc {} \;
```

---

## 5. 内容格式标准

### 5.1 段落和换行

#### 正确 ✅

```markdown
这是第一段内容。包含多个句子。

这是第二段内容。段落之间用一个空行分隔。

这是第三段。
```

#### 错误 ❌

```markdown
这是第一段。
这实际上还是第一段（换行需要两个空格或空行）。


这是第二段（不要使用多个空行）。
```

### 5.2 列表格式

#### 无序列表

```markdown
- 第一项
- 第二项
  - 子项 1（2 个空格缩进）
  - 子项 2
- 第三项
```

#### 有序列表

```markdown
1. 第一步
2. 第二步
   1. 子步骤 A（3 个空格缩进）
   2. 子步骤 B
3. 第三步
```

#### 任务列表

```markdown
- [ ] 待完成任务
- [x] 已完成任务
- [ ] 另一个待完成任务
```

### 5.3 代码块

#### 行内代码

```markdown
使用 `cargo build` 命令编译项目。
```

#### 代码块

````markdown
```rust
fn main() {
    println!("Hello, world!");
}
```
````

#### 带标题的代码块

````markdown
**示例：基础用法**

```rust
// 创建客户端
let client = OtlpClient::new(config).await?;
```
````

#### 带行号的引用

````markdown
```rust:src/main.rs
1  | fn main() {
2  |     println!("Hello!");
3  | }
```
````

### 5.4 引用块

#### 基本引用

```markdown
> 这是一段引用文字。
```

#### 多行引用

```markdown
> 这是第一行引用。
> 这是第二行引用。
>
> 这是引用的新段落。
```

#### 提示性引用

```markdown
> **注意**: 这是重要提示。

> **警告**: 这是警告信息。

> **提示**: 这是有用的提示。
```

### 5.5 表格

#### 基本表格

```markdown
| 列1 | 列2 | 列3 |
|-----|-----|-----|
| 数据1 | 数据2 | 数据3 |
| 数据4 | 数据5 | 数据6 |
```

#### 对齐表格

```markdown
| 左对齐 | 居中对齐 | 右对齐 |
|:------|:-------:|------:|
| 左 | 中 | 右 |
| L | C | R |
```

#### 复杂表格

```markdown
| 功能 | 状态 | 优先级 | 备注 |
|------|------|--------|------|
| **用户认证** | ✅ 完成 | P0 | 核心功能 |
| **数据导出** | 🚧 进行中 | P1 | 预计下周完成 |
| **API 文档** | 📝 计划中 | P2 | 待排期 |
```

---

## 6. 链接和引用标准

### 6.1 内部链接

#### 文档间链接

```markdown
详见 [安装指南](docs/installation.md)。

相关信息请查看 [API 参考](../api/README.md#authentication)。
```

#### 锚点链接

```markdown
跳转到 [配置章节](#3-配置)。

返回 [目录](#-目录)。
```

### 6.2 外部链接

#### 基本链接

```markdown
访问 [Rust 官网](https://www.rust-lang.org/)。
```

#### 带标题的链接

```markdown
参考 [Rust 1.90 发布公告](https://blog.rust-lang.org/2025/09/18/Rust-1.90.0.html "Rust 1.90.0 Release") 了解详情。
```

#### 脚注式链接

```markdown
这是正文内容[^1]。

[^1]: 这是脚注说明。
```

### 6.3 图片链接

#### 本地图片

```markdown
![架构图](images/architecture.png)
```

#### 远程图片

```markdown
![Logo](https://example.com/logo.png)
```

#### 带说明的图片

```markdown
<p align="center">
  <img src="images/diagram.png" alt="系统架构图" width="600">
  <br>
  <em>图 1: 系统架构图</em>
</p>
```

---

## 7. 特殊元素标准

### 7.1 Emoji 使用

#### 标准 Emoji 集

```markdown
## 📋 目录
## 🚀 快速开始
## 🔧 配置
## 📊 示例
## ⚠️ 注意事项
## ✅ 完成清单
## 🐛 已知问题
## 🔗 相关资源
```

#### 状态指示

```markdown
- ✅ 已完成
- 🚧 进行中
- 📝 计划中
- ❌ 已取消
- 🔄 需要更新
```

### 7.2 徽章（Badges）

```markdown
[![Rust](https://img.shields.io/badge/rust-1.90+-orange.svg)](https://www.rust-lang.org/)
[![License](https://img.shields.io/badge/license-Apache--2.0-blue.svg)](LICENSE)
[![Docs](https://img.shields.io/badge/docs-latest-blue.svg)](docs/README.md)
```

### 7.3 提示框

#### Markdown 引用式

```markdown
> **💡 提示**: 这是一个有用的提示。

> **⚠️ 警告**: 这是警告信息。

> **❌ 错误**: 这是错误说明。

> **✅ 成功**: 这是成功提示。
```

#### GitHub 风格 (GitHub Flavored Markdown)

```markdown
> [!NOTE]
> 这是一条注意事项。

> [!TIP]
> 这是一个提示。

> [!IMPORTANT]
> 这是重要信息。

> [!WARNING]
> 这是警告信息。

> [!CAUTION]
> 这是需要谨慎处理的信息。
```

### 7.4 折叠区域

```markdown
<details>
<summary>点击展开查看详细信息</summary>

这里是折叠的内容。

- 列表项 1
- 列表项 2

```rust
// 代码示例
fn example() {}
```

</details>
```

---

## 8. 文档类型模板

### 8.1 README 文档模板

```markdown
# 项目名称

**版本**: 1.0
**最后更新**: 2025年10月27日
**状态**: 🟢 活跃维护

> **简介**: 项目的一句话描述

[![Rust](https://img.shields.io/badge/rust-1.90+-orange.svg)](https://www.rust-lang.org/)
[![License](https://img.shields.io/badge/license-Apache--2.0-blue.svg)](LICENSE)

---

## 📋 目录

- [项目名称](#项目名称)
  - [📋 目录](#-目录)
  - [1. 概述](#1-概述)
  - [2. 快速开始](#2-快速开始)
  - [3. 功能特性](#3-功能特性)
  - [4. 文档](#4-文档)

---

## 1. 概述

### 1.1 项目简介

[项目描述]

### 1.2 核心特性

- ✅ 特性 1
- ✅ 特性 2
- ✅ 特性 3

---

## 2. 快速开始

### 2.1 安装

```bash
cargo add project-name
```

### 2.2 基础用法

```rust
// 示例代码
```

---

## 3. 功能特性

[功能说明]

---

## 4. 文档

- [用户指南](docs/user-guide.md)
- [API 参考](docs/api-reference.md)
- [开发指南](docs/development.md)

---

**文档版本**: 1.0
**维护者**: 团队名称
**最后更新**: 2025年10月27日
```

### 8.2 技术文档模板

```markdown
# 技术文档标题

**版本**: 1.0
**最后更新**: 2025年10月27日
**Rust 版本**: 1.90.0
**状态**: 🟢 活跃维护

> **简介**: 技术文档的简要说明

---

## 📋 目录

[自动生成]

---

## 1. 概述

### 1.1 背景

### 1.2 目标

---

## 2. 技术方案

### 2.1 架构设计

### 2.2 实现细节

---

## 3. 使用指南

### 3.1 配置

### 3.2 示例

---

## 4. 性能和优化

### 4.1 性能指标

### 4.2 优化建议

---

## 5. 故障排查

### 5.1 常见问题

### 5.2 调试方法

---

## 附录 A: 术语表

## 附录 B: 参考资料

---

**文档版本**: 1.0
**维护者**: 技术团队
**最后更新**: 2025年10月27日
```

### 8.3 API 文档模板

### 8.4 教程文档模板

[略 - 详见完整模板文档]

---

## 9. 质量检查清单

### 9.1 结构检查

- [ ] 包含元数据区（版本、日期、状态）
- [ ] 包含目录（3+ 一级标题的文档）
- [ ] 使用统一的序号系统
- [ ] 包含页脚信息
- [ ] 章节之间使用分隔线

### 9.2 格式检查

- [ ] 标题层级正确（不跳级）
- [ ] 序号格式统一
- [ ] 代码块指定语言
- [ ] 表格格式正确
- [ ] 链接可访问

### 9.3 内容检查

- [ ] 文档简介清晰
- [ ] 代码示例可运行
- [ ] 无拼写错误
- [ ] 无失效链接
- [ ] 内容准确最新

---

## 10. 工具和自动化

### 10.1 推荐工具

#### VSCode 插件
1. **Markdown All in One** - 目录生成、格式化
2. **markdownlint** - 格式检查
3. **Markdown Preview Enhanced** - 预览增强
4. **Code Spell Checker** - 拼写检查

### 10.2 VSCode 配置

```json
{
  "markdown.extension.toc.levels": "2..4",
  "markdown.extension.toc.unorderedList.marker": "-",
  "markdown.extension.list.indentationSize": "adaptive",
  "[markdown]": {
    "editor.defaultFormatter": "yzhang.markdown-all-in-one",
    "editor.formatOnSave": true,
    "editor.wordWrap": "on"
  }
}
```

### 10.3 自动化脚本

#### 批量生成目录

```bash
#!/bin/bash
# 为所有 Markdown 文件生成目录

find . -name "*.md" -not -path "*/node_modules/*" | while read file; do
    echo "Processing: $file"
    doctoc "$file" --github --title "## 📋 目录"
done
```

#### 格式检查

```bash
#!/bin/bash
# 检查所有 Markdown 文件格式

markdownlint '**/*.md' --ignore node_modules
```

---

## 附录 A: 完整示例文档

参见 [DOCUMENTATION_TEMPLATE_EXAMPLE.md](templates/DOCUMENTATION_TEMPLATE_EXAMPLE.md)

---

## 附录 B: 常见问题

### Q1: 目录必须手动维护吗？

A: 不需要。推荐使用 VSCode 的 "Markdown All in One" 插件自动生成和更新目录。

### Q2: 序号可以不用吗？

A: 对于教程类文档，序号是必须的。对于一些特殊章节（如"附录"、"参考资料"），可以不用序号。

### Q3: Emoji 使用有限制吗？

A: 建议使用标准的 Emoji 集（详见 7.1 节），确保跨平台兼容性。

### Q4: 如何处理超长文档？

A: 超过 1000 行的文档建议拆分为多个文档，使用目录文档（README.md）组织。

---

**文档版本**: 1.0  
**维护者**: OTLP Rust 文档团队  
**最后更新**: 2025年10月27日  
**反馈**: [提交 Issue](https://github.com/your-repo/issues)

---

**本标准自发布之日起强制执行。所有新文档和更新文档必须遵循此标准。** 📝✅

