# ğŸ”§ API å‚è€ƒæ–‡æ¡£

æ¬¢è¿æ¥åˆ° OTLP Rust çš„ API å‚è€ƒæ–‡æ¡£ä¸­å¿ƒã€‚è¿™é‡Œæä¾›äº†å®Œæ•´çš„ API æ–‡æ¡£å’Œä½¿ç”¨æŒ‡å—ã€‚

**æœ€åæ›´æ–°**: 2025å¹´10æœˆ24æ—¥

---

## ğŸ“š API æ–‡æ¡£

### æ ¸å¿ƒ API

#### [OTLP API å‚è€ƒ](otlp.md)

å®Œæ•´çš„ OTLP å®¢æˆ·ç«¯ API æ–‡æ¡£ï¼ŒåŒ…æ‹¬ï¼š

- **æ ¸å¿ƒç±»å‹**
  - `EnhancedOtlpClient` - ä¸»å®¢æˆ·ç«¯
  - `Tracer` - è¿½è¸ªå™¨
  - `Meter` - æŒ‡æ ‡æ”¶é›†å™¨
  - `Logger` - æ—¥å¿—è®°å½•å™¨

- **é…ç½®ç±»å‹**
  - `ClientBuilder` - å®¢æˆ·ç«¯æ„å»ºå™¨
  - `RetryConfig` - é‡è¯•é…ç½®
  - `BatchConfig` - æ‰¹å¤„ç†é…ç½®
  - `TransportConfig` - ä¼ è¾“é…ç½®

- **æ•°æ®ç±»å‹**
  - `SpanData` - Span æ•°æ®
  - `MetricData` - æŒ‡æ ‡æ•°æ®
  - `LogData` - æ—¥å¿—æ•°æ®
  - `AttributeValue` - å±æ€§å€¼

- **å¯¼å‡ºå™¨**
  - `Exporter` - å¯¼å‡ºå™¨ trait
  - `GrpcExporter` - gRPC å¯¼å‡ºå™¨
  - `HttpExporter` - HTTP å¯¼å‡ºå™¨

---

#### [Reliability API å‚è€ƒ](reliability.md)

å¯é æ€§æ¡†æ¶çš„å®Œæ•´ API æ–‡æ¡£ï¼ŒåŒ…æ‹¬ï¼š

- **é”™è¯¯å¤„ç†**
  - `UnifiedError` - ç»Ÿä¸€é”™è¯¯ç±»å‹
  - `ErrorContext` - é”™è¯¯ä¸Šä¸‹æ–‡
  - `ErrorCategory` - é”™è¯¯åˆ†ç±»

- **å®¹é”™æœºåˆ¶**
  - `CircuitBreaker` - æ–­è·¯å™¨
  - `RetryPolicy` - é‡è¯•ç­–ç•¥
  - `Timeout` - è¶…æ—¶æ§åˆ¶
  - `Bulkhead` - éš”æ¿æ¨¡å¼

- **ç›‘æ§ç»„ä»¶**
  - `HealthChecker` - å¥åº·æ£€æŸ¥
  - `PerformanceMonitor` - æ€§èƒ½ç›‘æ§
  - `ResourceMonitor` - èµ„æºç›‘æ§

- **è‡ªåŠ¨æ¢å¤**
  - `RecoveryManager` - æ¢å¤ç®¡ç†å™¨
  - `ConnectionPool` - è¿æ¥æ± 
  - `MemoryManager` - å†…å­˜ç®¡ç†

---

## ğŸ¯ å¿«é€Ÿå¯¼èˆª

### æŒ‰ä½¿ç”¨åœºæ™¯æŸ¥æ‰¾

#### æˆ‘æƒ³åˆ›å»ºå®¢æˆ·ç«¯

â†’ [EnhancedOtlpClient](otlp.md#enhancedotlpclient) + [ClientBuilder](otlp.md#clientbuilder)

#### æˆ‘æƒ³è®°å½•è¿½è¸ª

â†’ [Tracer](otlp.md#tracer) + [SpanData](otlp.md#spandata)

#### æˆ‘æƒ³æ”¶é›†æŒ‡æ ‡

â†’ [Meter](otlp.md#meter) + [MetricData](otlp.md#metricdata)

#### æˆ‘æƒ³å¯¼å‡ºæ—¥å¿—

â†’ [Logger](otlp.md#logger) + [LogData](otlp.md#logdata)

#### æˆ‘æƒ³å¤„ç†é”™è¯¯

â†’ [UnifiedError](reliability.md#unifiederror) + [ErrorContext](reliability.md#errorcontext)

#### æˆ‘æƒ³å®ç°å®¹é”™

â†’ [CircuitBreaker](reliability.md#circuitbreaker) + [RetryPolicy](reliability.md#retrypolicy)

#### æˆ‘æƒ³ç›‘æ§å¥åº·

â†’ [HealthChecker](reliability.md#healthchecker) + [PerformanceMonitor](reliability.md#performancemonitor)

---

## ğŸ“Š API è¦†ç›–åº¦

### OTLP API

| æ¨¡å— | å…¬å¼€ API | æ–‡æ¡£è¦†ç›– | ç¤ºä¾‹ä»£ç  |
|------|---------|---------|---------|
| å®¢æˆ·ç«¯ | 15+ | âœ… 100% | âœ… 8ä¸ª |
| è¿½è¸ª | 20+ | âœ… 100% | âœ… 12ä¸ª |
| æŒ‡æ ‡ | 18+ | âœ… 100% | âœ… 10ä¸ª |
| æ—¥å¿— | 12+ | âœ… 100% | âœ… 6ä¸ª |
| é…ç½® | 25+ | âœ… 100% | âœ… 15ä¸ª |
| å¯¼å‡º | 10+ | âœ… 100% | âœ… 5ä¸ª |

### Reliability API

| æ¨¡å— | å…¬å¼€ API | æ–‡æ¡£è¦†ç›– | ç¤ºä¾‹ä»£ç  |
|------|---------|---------|---------|
| é”™è¯¯å¤„ç† | 12+ | âœ… 100% | âœ… 8ä¸ª |
| å®¹é”™æœºåˆ¶ | 16+ | âœ… 100% | âœ… 13ä¸ª |
| ç›‘æ§ | 14+ | âœ… 100% | âœ… 10ä¸ª |
| è‡ªåŠ¨æ¢å¤ | 10+ | âœ… 100% | âœ… 7ä¸ª |

---

## ğŸ“ å­¦ä¹ è·¯å¾„

### å¿«é€Ÿå…¥é—¨ï¼ˆ30åˆ†é’Ÿï¼‰

```text
1. é˜…è¯» EnhancedOtlpClient æ–‡æ¡£
   â†“
2. æŸ¥çœ‹åŸºç¡€ç¤ºä¾‹ä»£ç 
   â†“
3. åˆ›å»ºç¬¬ä¸€ä¸ªå®¢æˆ·ç«¯
   â†“
4. è¿è¡Œç®€å•ç¤ºä¾‹
```

### æ·±å…¥å­¦ä¹ ï¼ˆ2-3å°æ—¶ï¼‰

```text
1. å®Œæˆå¿«é€Ÿå…¥é—¨
   â†“
2. å­¦ä¹  Tracer/Meter/Logger
   â†“
3. ç†è§£é…ç½®é€‰é¡¹
   â†“
4. æŒæ¡é”™è¯¯å¤„ç†
   â†“
5. å®è·µå®¹é”™æœºåˆ¶
```

### ç²¾é€šæŒæ¡ï¼ˆ1-2å¤©ï¼‰

```text
1. å®Œæˆæ·±å…¥å­¦ä¹ 
   â†“
2. ç ”ç©¶æ‰€æœ‰ API
   â†“
3. é˜…è¯»æºç å®ç°
   â†“
4. æ„å»ºå¤æ‚åº”ç”¨
   â†“
5. ä¼˜åŒ–æ€§èƒ½
```

---

## ğŸ’¡ ä½¿ç”¨å»ºè®®

### å¦‚ä½•é˜…è¯» API æ–‡æ¡£

1. **å…ˆçœ‹æ¦‚è§ˆ** - äº†è§£æ¨¡å—æ•´ä½“ç»“æ„
2. **æŸ¥çœ‹ç¤ºä¾‹** - çœ‹å®é™…ä½¿ç”¨æ–¹æ³•
3. **ç†è§£å‚æ•°** - æŒæ¡æ¯ä¸ªå‚æ•°å«ä¹‰
4. **æ³¨æ„äº‹é¡¹** - å…³æ³¨ä½¿ç”¨æ³¨æ„äº‹é¡¹
5. **ç›¸å…³ API** - æŸ¥çœ‹ç›¸å…³è”çš„ API

### æœ€ä½³å®è·µ

- âœ… **ä½¿ç”¨ç±»å‹ç³»ç»Ÿ** - åˆ©ç”¨ Rust çš„ç±»å‹å®‰å…¨
- âœ… **å¤„ç†é”™è¯¯** - ä¸è¦å¿½ç•¥é”™è¯¯
- âœ… **æŸ¥çœ‹æ–‡æ¡£** - ä¸ç¡®å®šæ—¶æŸ¥æ–‡æ¡£
- âœ… **è¿è¡Œç¤ºä¾‹** - å…ˆè¿è¡Œå†ä¿®æ”¹
- âœ… **é˜…è¯»æºç ** - æºç æ˜¯æœ€å¥½çš„æ–‡æ¡£

---

## ğŸ”— ç›¸å…³èµ„æº

### é¡¹ç›®æ–‡æ¡£

- [å¿«é€Ÿå¼€å§‹](../guides/quick-start.md) - å¿«é€Ÿä¸Šæ‰‹
- [OTLP å®¢æˆ·ç«¯æŒ‡å—](../guides/otlp-client.md) - è¯¦ç»†ä½¿ç”¨æŒ‡å—
- [å¯é æ€§æ¡†æ¶æŒ‡å—](../guides/reliability-framework.md) - å¯é æ€§ä½¿ç”¨
- [åŸºç¡€ç¤ºä¾‹](../examples/basic-examples.md) - å…¥é—¨ç¤ºä¾‹
- [é«˜çº§ç¤ºä¾‹](../examples/advanced-examples.md) - é«˜çº§ç¤ºä¾‹

### åœ¨çº¿æ–‡æ¡£

- [docs.rs/otlp](https://docs.rs/otlp) - åœ¨çº¿ API æ–‡æ¡£
- [docs.rs/reliability](https://docs.rs/reliability) - å¯é æ€§æ–‡æ¡£

### æºä»£ç 

- [crates/otlp/src](../../crates/otlp/src) - OTLP æºç 
- [crates/reliability/src](../../crates/reliability/src) - Reliability æºç 

---

## ğŸ“– API è®¾è®¡åŸåˆ™

### æ ¸å¿ƒåŸåˆ™

1. **ç±»å‹å®‰å…¨** - åˆ©ç”¨ Rust ç±»å‹ç³»ç»Ÿé˜²æ­¢é”™è¯¯
2. **é›¶æˆæœ¬æŠ½è±¡** - é«˜å±‚æŠ½è±¡ä¸ç‰ºç‰²æ€§èƒ½
3. **å¯ç»„åˆæ€§** - API æ˜“äºç»„åˆä½¿ç”¨
4. **æ˜ç¡®æ€§** - API è¯­ä¹‰æ¸…æ™°æ˜ç¡®
5. **å‘åå…¼å®¹** - éµå¾ªè¯­ä¹‰åŒ–ç‰ˆæœ¬

### å‘½åçº¦å®š

- **Builder æ¨¡å¼** - `with_*` æ–¹æ³•ç”¨äºé…ç½®
- **åˆ›å»ºæ–¹æ³•** - `new()` ç”¨äºç®€å•åˆ›å»º
- **æ„å»ºæ–¹æ³•** - `build()` ç”¨äºå¤æ‚æ„å»º
- **å¼‚æ­¥æ–¹æ³•** - `async fn` ç”¨äºå¼‚æ­¥æ“ä½œ
- **é”™è¯¯å¤„ç†** - è¿”å› `Result<T, E>`

### ç”Ÿå‘½å‘¨æœŸ

- **'static** - å…¨å±€èµ„æº
- **'a** - å¼•ç”¨ç”Ÿå‘½å‘¨æœŸ
- **æ— ç”Ÿå‘½å‘¨æœŸ** - æ‹¥æœ‰æ‰€æœ‰æƒ

---

## ğŸ” æŸ¥æ‰¾æŠ€å·§

### æŒ‰åŠŸèƒ½æŸ¥æ‰¾

ä½¿ç”¨ Ctrl+F (æˆ– Cmd+F) æœç´¢å…³é”®è¯ï¼š

- æœç´¢ "Client" æŸ¥æ‰¾å®¢æˆ·ç«¯ç›¸å…³
- æœç´¢ "Tracer" æŸ¥æ‰¾è¿½è¸ªç›¸å…³
- æœç´¢ "Meter" æŸ¥æ‰¾æŒ‡æ ‡ç›¸å…³
- æœç´¢ "Error" æŸ¥æ‰¾é”™è¯¯å¤„ç†
- æœç´¢ "Config" æŸ¥æ‰¾é…ç½®é€‰é¡¹

### æŒ‰ç±»å‹æŸ¥æ‰¾

- **struct** - æ•°æ®ç»“æ„
- **enum** - æšä¸¾ç±»å‹
- **trait** - trait å®šä¹‰
- **fn** - å‡½æ•°
- **impl** - å®ç°

---

## ğŸ¤ è´¡çŒ® API æ–‡æ¡£

æƒ³è¦æ”¹è¿› API æ–‡æ¡£ï¼Ÿ

1. æŸ¥çœ‹ [è´¡çŒ®æŒ‡å—](../guides/CONTRIBUTING.md)
2. é€‰æ‹©éœ€è¦æ”¹è¿›çš„ API
3. ç¼–å†™æ¸…æ™°çš„æ–‡æ¡£å’Œç¤ºä¾‹
4. æäº¤ Pull Request

**æˆ‘ä»¬æ¬¢è¿**:

- æ›´æ¸…æ™°çš„æè¿°
- æ›´å¤šçš„ç¤ºä¾‹ä»£ç 
- å¸¸è§é”™è¯¯è¯´æ˜
- æ€§èƒ½æç¤º

---

## ğŸ’¬ åé¦ˆ

### API ä½¿ç”¨é—®é¢˜ï¼Ÿ

1. æŸ¥çœ‹ [æ•…éšœæ’é™¤](../guides/troubleshooting.md)
2. æœç´¢ [GitHub Issues](https://github.com/your-org/OTLP_rust/issues)
3. æå‡ºæ–°çš„ Issue

### API è®¾è®¡å»ºè®®ï¼Ÿ

æˆ‘ä»¬æ¬¢è¿ API è®¾è®¡çš„å»ºè®®å’Œåé¦ˆï¼š

- ğŸ“ API æ˜“ç”¨æ€§æ”¹è¿›
- ğŸ› API ç¼ºé™·æŠ¥å‘Š
- âœ¨ æ–° API éœ€æ±‚
- ğŸ“š æ–‡æ¡£æ”¹è¿›

---

*ç¥ä½ ä½¿ç”¨æ„‰å¿«ï¼* ğŸ”§
