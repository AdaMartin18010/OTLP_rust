# Rust å¸¸è§é—®é¢˜æ·±åº¦è§£ç­” 2025

**ç‰ˆæœ¬**: 2.0  
**åˆ›å»ºæ—¥æœŸ**: 2025å¹´10æœˆ28æ—¥  
**æ›´æ–°æ—¥æœŸ**: 2025å¹´10æœˆ28æ—¥  
**Rustç‰ˆæœ¬**: 1.90.0  
**çŠ¶æ€**: âœ… å®Œæ•´  
**ä½œè€…**: OTLP_rustæ–‡æ¡£å›¢é˜Ÿ  
**å®¡æ ¸**: æŠ€æœ¯å§”å‘˜ä¼š

---

## ğŸ“‹ æ–‡æ¡£æ¦‚è¿°

æœ¬æ–‡æ¡£æ·±åº¦è§£ç­”Rustå¼€å‘ä¸­æœ€å¸¸è§çš„10å¤§ç±»é—®é¢˜ï¼ŒåŒ…å«åŸç†åˆ†æã€å¤šç§è§£å†³æ–¹æ¡ˆã€å®Œæ•´ä»£ç ç¤ºä¾‹å’Œæ€§èƒ½å¯¹æ¯”ã€‚é€šè¿‡é—®é¢˜é©±åŠ¨çš„æ–¹å¼å¸®åŠ©å¼€å‘è€…å¿«é€Ÿè§£å†³å®é™…å›°éš¾ã€‚

**é€‚ç”¨äººç¾¤**: ä¸­çº§åŠä»¥ä¸ŠRustå¼€å‘è€…  
**é¢„è®¡é˜…è¯»æ—¶é•¿**: 2-4å°æ—¶ï¼ˆå®Œæ•´ï¼‰/ 10-20åˆ†é’Ÿï¼ˆå•ä¸ªé—®é¢˜ï¼‰  
**å‰ç½®çŸ¥è¯†**: RuståŸºç¡€è¯­æ³•ã€æ‰€æœ‰æƒæ¦‚å¿µã€åŸºæœ¬ç±»å‹ç³»ç»Ÿ

---

## ğŸ“‹ ç›®å½•

### ç¬¬ä¸€éƒ¨åˆ†ï¼šç¼–è¯‘ä¸æ„å»º
1. [ç¼–è¯‘æ€§èƒ½é—®é¢˜](#1-ç¼–è¯‘æ€§èƒ½é—®é¢˜)
   - 1.1 [ç¼–è¯‘é€Ÿåº¦æ…¢](#11-ç¼–è¯‘é€Ÿåº¦æ…¢)
   - 1.2 [äºŒè¿›åˆ¶æ–‡ä»¶è¿‡å¤§](#12-äºŒè¿›åˆ¶æ–‡ä»¶è¿‡å¤§)
   - 1.3 [å¢é‡ç¼–è¯‘å¤±æ•ˆ](#13-å¢é‡ç¼–è¯‘å¤±æ•ˆ)

### ç¬¬äºŒéƒ¨åˆ†ï¼šæ ¸å¿ƒæ¦‚å¿µ
2. [æ‰€æœ‰æƒç³»ç»Ÿ](#2-æ‰€æœ‰æƒç³»ç»Ÿ)
   - 2.1 [ç§»åŠ¨è¯­ä¹‰ç†è§£](#21-ç§»åŠ¨è¯­ä¹‰ç†è§£)
   - 2.2 [å¤šå¤„å…±äº«å¯å˜æ•°æ®](#22-å¤šå¤„å…±äº«å¯å˜æ•°æ®)
   - 2.3 [ä»é›†åˆä¸­å–å‡ºå…ƒç´ ](#23-ä»é›†åˆä¸­å–å‡ºå…ƒç´ )

3. [ç”Ÿå‘½å‘¨æœŸ](#3-ç”Ÿå‘½å‘¨æœŸ)
   - 3.1 [ç”Ÿå‘½å‘¨æœŸæ¨å¯¼è§„åˆ™](#31-ç”Ÿå‘½å‘¨æœŸæ¨å¯¼è§„åˆ™)
   - 3.2 [è¿”å›å¼•ç”¨çš„å‡½æ•°](#32-è¿”å›å¼•ç”¨çš„å‡½æ•°)
   - 3.3 [ç»“æ„ä½“ç”Ÿå‘½å‘¨æœŸ](#33-ç»“æ„ä½“ç”Ÿå‘½å‘¨æœŸ)

### ç¬¬ä¸‰éƒ¨åˆ†ï¼šå¼‚æ­¥ç¼–ç¨‹
4. [Async/Awaitæœºåˆ¶](#4-asyncawaitæœºåˆ¶)
   - 4.1 [å¼‚æ­¥ä¸å¤šçº¿ç¨‹åŒºåˆ«](#41-å¼‚æ­¥ä¸å¤šçº¿ç¨‹åŒºåˆ«)
   - 4.2 [åŒæ­¥ä»£ç è°ƒç”¨å¼‚æ­¥](#42-åŒæ­¥ä»£ç è°ƒç”¨å¼‚æ­¥)
   - 4.3 [å¼‚æ­¥æ€§èƒ½ä¼˜åŒ–](#43-å¼‚æ­¥æ€§èƒ½ä¼˜åŒ–)

### ç¬¬å››éƒ¨åˆ†ï¼šé”™è¯¯å¤„ç†
5. [Resultå’ŒOption](#5-resultå’Œoption)
   - 5.1 [ä¼˜é›…çš„é”™è¯¯ä¼ æ’­](#51-ä¼˜é›…çš„é”™è¯¯ä¼ æ’­)
   - 5.2 [è‡ªå®šä¹‰é”™è¯¯ç±»å‹](#52-è‡ªå®šä¹‰é”™è¯¯ç±»å‹)
   - 5.3 [é”™è¯¯æ¢å¤ç­–ç•¥](#53-é”™è¯¯æ¢å¤ç­–ç•¥)

### ç¬¬äº”éƒ¨åˆ†ï¼šæ€§èƒ½ä¼˜åŒ–
6. [æ€§èƒ½ç“¶é¢ˆè¯Šæ–­](#6-æ€§èƒ½ç“¶é¢ˆè¯Šæ–­)
   - 6.1 [æ€§èƒ½åˆ†æå·¥å…·](#61-æ€§èƒ½åˆ†æå·¥å…·)
   - 6.2 [å†…å­˜æ³„æ¼æ’æŸ¥](#62-å†…å­˜æ³„æ¼æ’æŸ¥)
   - 6.3 [CPUçƒ­ç‚¹å®šä½](#63-cpuçƒ­ç‚¹å®šä½)

### ç¬¬å…­éƒ¨åˆ†ï¼šå¹¶å‘ç¼–ç¨‹
7. [å¹¶å‘å®‰å…¨](#7-å¹¶å‘å®‰å…¨)
   - 7.1 [æ­»é”é¿å…](#71-æ­»é”é¿å…)
   - 7.2 [æ•°æ®ç«äº‰é¢„é˜²](#72-æ•°æ®ç«äº‰é¢„é˜²)
   - 7.3 [æ— é”ç¼–ç¨‹](#73-æ— é”ç¼–ç¨‹)

### ç¬¬ä¸ƒéƒ¨åˆ†ï¼šç±»å‹ç³»ç»Ÿ
8. [Traité«˜çº§ç”¨æ³•](#8-traité«˜çº§ç”¨æ³•)
   - 8.1 [Trait vs æšä¸¾é€‰æ‹©](#81-trait-vs-æšä¸¾é€‰æ‹©)
   - 8.2 [Traitå¯¹è±¡æ€§èƒ½](#82-traitå¯¹è±¡æ€§èƒ½)
   - 8.3 [å…³è”ç±»å‹ä¸æ³›å‹](#83-å…³è”ç±»å‹ä¸æ³›å‹)

### ç¬¬å…«éƒ¨åˆ†ï¼šå®ç¼–ç¨‹
9. [å®ç³»ç»Ÿ](#9-å®ç³»ç»Ÿ)
   - 9.1 [å£°æ˜å®ä½¿ç”¨](#91-å£°æ˜å®ä½¿ç”¨)
   - 9.2 [è¿‡ç¨‹å®å¼€å‘](#92-è¿‡ç¨‹å®å¼€å‘)
   - 9.3 [å®è°ƒè¯•æŠ€å·§](#93-å®è°ƒè¯•æŠ€å·§)

### ç¬¬ä¹éƒ¨åˆ†ï¼šé¡¹ç›®å®è·µ
10. [å·¥ç¨‹åŒ–æœ€ä½³å®è·µ](#10-å·¥ç¨‹åŒ–æœ€ä½³å®è·µ)
    - 10.1 [é¡¹ç›®ç»“æ„ç»„ç»‡](#101-é¡¹ç›®ç»“æ„ç»„ç»‡)
    - 10.2 [ä¾èµ–ç®¡ç†ç­–ç•¥](#102-ä¾èµ–ç®¡ç†ç­–ç•¥)
    - 10.3 [æµ‹è¯•ä¸CI/CD](#103-æµ‹è¯•ä¸cicd)

---

## 1. ç¼–è¯‘æ€§èƒ½é—®é¢˜

### 1.1 ç¼–è¯‘é€Ÿåº¦æ…¢

#### 1.1.1 é—®é¢˜ç—‡çŠ¶

**æè¿°**: åˆæ¬¡ç¼–è¯‘æˆ–clean buildéœ€è¦5-10åˆ†é’Ÿç”šè‡³æ›´é•¿

**å½±å“**:
- å¼€å‘è¿­ä»£é€Ÿåº¦æ…¢
- CI/CDæµæ°´çº¿è€—æ—¶é•¿
- å¼€å‘ä½“éªŒå·®

#### 1.1.2 æ ¹æœ¬åŸå› 

**æ·±åº¦åˆ†æ**:

1. **æ³›å‹å•æ€åŒ–ï¼ˆMonomorphizationï¼‰**
   
æ¯ä¸ªæ³›å‹å®ä¾‹åŒ–éƒ½ä¼šç”Ÿæˆç‹¬ç«‹çš„æœºå™¨ç ï¼š

```rust
// è¿™ä¸ªç®€å•å‡½æ•°ä¼šç”Ÿæˆå¤šä»½ä»£ç 
fn process<T: std::fmt::Display>(item: T) {
    println!("{}", item);
}

fn main() {
    process(42);        // ç”Ÿæˆ process::<i32>
    process("hello");   // ç”Ÿæˆ process::<&str>
    process(3.14);      // ç”Ÿæˆ process::<f64>
    // æ¯ç§ç±»å‹éƒ½ä¼šå®Œæ•´ç¼–è¯‘ä¸€æ¬¡ï¼
}
```

**æˆæœ¬åˆ†æ**:
```
å•ä¸ªæ³›å‹å‡½æ•°:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
å®ä¾‹åŒ–æ¬¡æ•°: 10æ¬¡
æ¯æ¬¡ç¼–è¯‘: 100ms
æ€»è€—æ—¶: 1000ms
```

2. **LLVMä¼˜åŒ–å¼€é”€**

```rust
// é«˜çº§ä¼˜åŒ–éœ€è¦å¤§é‡è®¡ç®—
#[profile.release]
opt-level = 3  // æœ€é«˜ä¼˜åŒ–çº§åˆ«
lto = "fat"    // å…¨å±€é“¾æ¥æ—¶ä¼˜åŒ–

// ä¼˜åŒ–æ—¶é—´åˆ†å¸ƒ:
// - å‰ç«¯(parsing + type check): 20%
// - LLVMä¼˜åŒ–: 60%
// - é“¾æ¥: 20%
```

3. **ä¾èµ–é“¾ç¼–è¯‘**

```toml
[dependencies]
tokio = "1.40"  # åŒ…å«100+ä¸ªå­crate
serde = "1.0"   # åŒ…å«deriveå®ï¼Œå¢åŠ ç¼–è¯‘æ—¶é—´
```

**ä¾èµ–ç¼–è¯‘æ ‘**:
```
your-project
â”œâ”€â”€ tokio (10s)
â”‚   â”œâ”€â”€ tokio-macros (2s)
â”‚   â”œâ”€â”€ mio (5s)
â”‚   â””â”€â”€ ... (30+ dependencies)
â”œâ”€â”€ serde (3s)
â”‚   â””â”€â”€ serde_derive (4s)
â””â”€â”€ ... æ€»è®¡: 120s
```

#### 1.1.3 è§£å†³æ–¹æ¡ˆ

**æ–¹æ¡ˆ1: å¯ç”¨LLDé“¾æ¥å™¨ï¼ˆRust 1.90è‡ªåŠ¨ï¼‰**

**æ•ˆæœ**: é“¾æ¥é€Ÿåº¦æå‡50-100%

```bash
# éªŒè¯LLDæ˜¯å¦å¯ç”¨
rustc --version
# rustc 1.90.0 (stable)

# Linux x86_64è‡ªåŠ¨å¯ç”¨ï¼Œå…¶ä»–å¹³å°æ‰‹åŠ¨é…ç½®
```

**.cargo/config.toml**:
```toml
[target.x86_64-unknown-linux-gnu]
linker = "clang"
rustflags = ["-C", "link-arg=-fuse-ld=lld"]

[target.x86_64-pc-windows-msvc]
linker = "rust-lld"

[target.x86_64-apple-darwin]
rustflags = ["-C", "link-arg=-fuse-ld=lld"]
```

**æ€§èƒ½å¯¹æ¯”**:
```
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
é“¾æ¥å™¨æ€§èƒ½å¯¹æ¯”ï¼ˆ50Kè¡Œé¡¹ç›®ï¼‰
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
é“¾æ¥å™¨        åˆæ¬¡ç¼–è¯‘    å¢é‡ç¼–è¯‘    å†…å­˜å ç”¨
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
GNU ld        120s       30s         2.5GB
LLVM lld      70s        17s         1.8GB
mold          50s        12s         1.5GB
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
æå‡:         +71%       +76%        -28%
```

---

**æ–¹æ¡ˆ2: ä½¿ç”¨sccacheç¼“å­˜ç¼–è¯‘ç»“æœ**

**å®‰è£…é…ç½®**:
```bash
# å®‰è£…sccache
cargo install sccache

# é…ç½®ç¯å¢ƒå˜é‡ï¼ˆLinux/macOSï¼‰
export RUSTC_WRAPPER=sccache
export SCCACHE_DIR=$HOME/.cache/sccache

# æˆ–æ·»åŠ åˆ°.cargo/config.toml
[build]
rustc-wrapper = "sccache"
```

**éªŒè¯æ•ˆæœ**:
```bash
# æ¸…ç©ºç¼“å­˜åé¦–æ¬¡ç¼–è¯‘
cargo clean
time cargo build --release
# æ—¶é—´: 120s

# å†æ¬¡ç¼–è¯‘ï¼ˆåˆ©ç”¨ç¼“å­˜ï¼‰
cargo clean
time cargo build --release
# æ—¶é—´: 15s ï¼ˆæå‡8å€ï¼ï¼‰

# æŸ¥çœ‹ç¼“å­˜ç»Ÿè®¡
sccache --show-stats
```

**ç¼“å­˜æ•ˆæœ**:
```
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
sccacheæ•ˆæœï¼ˆå›¢é˜Ÿå¼€å‘ï¼‰
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
åœºæ™¯              æ— ç¼“å­˜     æœ‰ç¼“å­˜     æå‡
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
é¦–æ¬¡ç¼–è¯‘          120s      120s       -
ç¬¬äºŒæ¬¡ç¼–è¯‘        120s      15s        8x
åˆ‡æ¢åˆ†æ”¯          60s       8s         7.5x
CIæ„å»º            120s      20s        6x
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
```

---

**æ–¹æ¡ˆ3: å¼€å‘ç¯å¢ƒä¼˜åŒ–é…ç½®**

**Cargo.toml**:
```toml
[profile.dev]
# å…³é—­ä¼˜åŒ–ï¼ˆæœ€å¿«ç¼–è¯‘ï¼‰
opt-level = 0

# å¯ç”¨å¢é‡ç¼–è¯‘
incremental = true

# æœ€å¤§å¹¶è¡Œç¼–è¯‘å•å…ƒ
codegen-units = 256

# è°ƒè¯•ä¿¡æ¯çº§åˆ«ï¼ˆ0=æ— ï¼Œ1=è¡Œå·ï¼Œ2=å®Œæ•´ï¼‰
debug = 1  # å‡å°‘è°ƒè¯•ä¿¡æ¯ç”Ÿæˆæ—¶é—´

[profile.dev.package."*"]
# ä¾èµ–åŒ…ä½¿ç”¨ä¼˜åŒ–ç‰ˆæœ¬ï¼ˆæå‡è¿è¡Œé€Ÿåº¦ï¼‰
opt-level = 3
```

**æ•ˆæœ**:
```
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
å¼€å‘é…ç½®ä¼˜åŒ–æ•ˆæœ
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
æŒ‡æ ‡          é»˜è®¤      ä¼˜åŒ–å     æ”¹å–„
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
é¦–æ¬¡ç¼–è¯‘      45s      30s        -33%
å¢é‡ç¼–è¯‘      8s       3s         -62%
è¿è¡Œé€Ÿåº¦      æ…¢       ä¸­ç­‰       +2x
è°ƒè¯•ä½“éªŒ      å®Œæ•´     è‰¯å¥½       -
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
```

---

**æ–¹æ¡ˆ4: ä¾èµ–ä¼˜åŒ–**

**å‡å°‘ä¸å¿…è¦çš„features**:
```toml
# âŒ å¼•å…¥å…¨éƒ¨featuresï¼ˆç¼–è¯‘æ…¢ï¼‰
[dependencies]
tokio = { version = "1.40", features = ["full"] }

# âœ… åªå¼•å…¥éœ€è¦çš„features
[dependencies]
tokio = { version = "1.40", features = ["rt-multi-thread", "net", "time"] }
```

**featureså¯¹ç¼–è¯‘æ—¶é—´å½±å“**:
```
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Tokio featuresç¼–è¯‘æ—¶é—´
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
é…ç½®              ç¼–è¯‘æ—¶é—´    äºŒè¿›åˆ¶å¤§å°
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
full              45s        8.5MB
æœ€å°å­é›†           12s        2.1MB
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
èŠ‚çœ:             -73%       -75%
```

---

**æ–¹æ¡ˆ5: å·¥ä½œåŒºæ‹†åˆ†**

å¯¹äºå¤§å‹é¡¹ç›®ï¼Œåˆç†æ‹†åˆ†ä¸ºå¤šä¸ªcrateï¼š

```
my-project/
â”œâ”€â”€ Cargo.toml (workspace)
â”œâ”€â”€ core/           # æ ¸å¿ƒé€»è¾‘ï¼ˆå¾ˆå°‘ä¿®æ”¹ï¼‰
â”œâ”€â”€ api/            # APIå±‚ï¼ˆå¸¸ä¿®æ”¹ï¼‰
â”œâ”€â”€ models/         # æ•°æ®æ¨¡å‹ï¼ˆå¶å°”ä¿®æ”¹ï¼‰
â””â”€â”€ utils/          # å·¥å…·å‡½æ•°ï¼ˆå¾ˆå°‘ä¿®æ”¹ï¼‰
```

**Cargo.toml**:
```toml
[workspace]
members = ["core", "api", "models", "utils"]
resolver = "2"

# å…±äº«ä¾èµ–ç‰ˆæœ¬
[workspace.dependencies]
tokio = "1.40"
serde = "1.0"
```

**æ•ˆæœ**:
```
ä¿®æ”¹api/ä»£ç :
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
å•ä½“é¡¹ç›®: é‡æ–°ç¼–è¯‘å…¨éƒ¨ (45s)
å·¥ä½œåŒº:   åªç¼–è¯‘api (8s)
æå‡: 5.6å€
```

---

#### 1.1.4 ç»¼åˆä¼˜åŒ–æ–¹æ¡ˆ

**å®Œæ•´é…ç½®ç¤ºä¾‹**:

**.cargo/config.toml**:
```toml
[build]
rustc-wrapper = "sccache"
rustflags = ["-C", "link-arg=-fuse-ld=lld"]

[target.x86_64-unknown-linux-gnu]
linker = "clang"
```

**Cargo.toml**:
```toml
[profile.dev]
opt-level = 0
incremental = true
codegen-units = 256
debug = 1

[profile.dev.package."*"]
opt-level = 3

[profile.release]
opt-level = 3
lto = "thin"  # thinæ¯”fatæ›´å¿«
codegen-units = 16  # å¹³è¡¡ç¼–è¯‘é€Ÿåº¦å’Œè¿è¡Œæ€§èƒ½
strip = "symbols"
```

**æ•ˆæœæ±‡æ€»**:
```
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ç»¼åˆä¼˜åŒ–æ•ˆæœï¼ˆä¸­å‹é¡¹ç›®50Kè¡Œï¼‰
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
åœºæ™¯          ä¼˜åŒ–å‰    ä¼˜åŒ–å     æå‡
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
é¦–æ¬¡ç¼–è¯‘      180s     55s        +227%
å¢é‡ç¼–è¯‘      25s      5s         +400%
ç¼“å­˜ç¼–è¯‘      180s     12s        +1400%
CIæ„å»º        180s     30s        +500%
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
```

---

### 1.2 äºŒè¿›åˆ¶æ–‡ä»¶è¿‡å¤§

#### 1.2.1 é—®é¢˜ç—‡çŠ¶

**æè¿°**: Releaseæ„å»ºç”Ÿæˆçš„äºŒè¿›åˆ¶æ–‡ä»¶10MB+ï¼ŒæœŸæœ›1-2MB

**å½±å“**:
- éƒ¨ç½²åŒ…è¿‡å¤§
- å¯åŠ¨æ—¶é—´å¢åŠ 
- å†…å­˜å ç”¨å¢åŠ 
- Dockeré•œåƒè‡ƒè‚¿

#### 1.2.2 æ ¹æœ¬åŸå› 

**åˆ†æå·¥å…·**:
```bash
# å®‰è£…cargo-bloat
cargo install cargo-bloat

# åˆ†æäºŒè¿›åˆ¶ç»„æˆ
cargo bloat --release

# æŸ¥çœ‹æœ€å¤§çš„20ä¸ªå‡½æ•°
cargo bloat --release -n 20

# æŒ‰crateåˆ†æ
cargo bloat --release --crates
```

**å…¸å‹è¾“å‡º**:
```
File  .text     Size             Crate Name
0.5%   3.0%  45.5KB               std <&T as core::fmt::Debug>::fmt
0.4%   2.5%  38.2KB          [Unknown] __rust_alloc
0.4%   2.3%  35.1KB            tokio tokio::runtime::...
0.3%   2.0%  30.5KB             serde serde::de::...
...

Crates:
  35.2%  std
  18.5%  tokio
  12.3%  serde
  ...
```

**ä¸»è¦åŸå› **:
1. è°ƒè¯•ç¬¦å·æœªåˆ é™¤
2. Panicå¤„ç†ä»£ç ï¼ˆunwindingï¼‰
3. æ³›å‹å•æ€åŒ–äº§ç”Ÿçš„é‡å¤ä»£ç 
4. ä¾èµ–åº“åŒ…å«unusedä»£ç 

---

#### 1.2.3 è§£å†³æ–¹æ¡ˆ

**æ–¹æ¡ˆ1: åŸºç¡€ä¼˜åŒ–é…ç½®**

**Cargo.toml**:
```toml
[profile.release]
# ä¼˜åŒ–å¤§å°è€Œéé€Ÿåº¦
opt-level = "z"  # æˆ– "s"

# å»é™¤ç¬¦å·è¡¨
strip = "symbols"  # æˆ– "debuginfo"

# é“¾æ¥æ—¶ä¼˜åŒ–
lto = "fat"

# å•ç¼–è¯‘å•å…ƒï¼ˆæ›´å¥½çš„å»é‡ï¼‰
codegen-units = 1

# Abortä»£æ›¿unwind
panic = "abort"
```

**é€æ­¥æ•ˆæœ**:
```
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ä¼˜åŒ–é…ç½®æ•ˆæœï¼ˆç®€å•HTTPæœåŠ¡ï¼‰
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
é…ç½®                å¤§å°      è¿è¡Œé€Ÿåº¦
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
é»˜è®¤release         8.5MB    åŸºçº¿
+ opt-level="z"     6.2MB    -8%
+ strip             4.1MB    -8%
+ lto="fat"         3.5MB    -8%
+ codegen-units=1   3.2MB    -5%
+ panic="abort"     2.8MB    +2%
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
æ€»è®¡:               -67%     -18%
```

---

**æ–¹æ¡ˆ2: UPXå‹ç¼©ï¼ˆè¿è¡Œæ—¶è§£å‹ï¼‰**

```bash
# å®‰è£…UPX
# Ubuntu: apt install upx
# macOS: brew install upx

# æ„å»º
cargo build --release

# å‹ç¼©
upx --best --lzma target/release/myapp

# æ•ˆæœ
åŸå§‹: 2.8MB
å‹ç¼©: 0.9MB (-68%)
```

**æ³¨æ„äº‹é¡¹**:
- âš ï¸ å¯åŠ¨æ—¶éœ€è¦è§£å‹ï¼ˆå¢åŠ 10-50msï¼‰
- âš ï¸ æŸäº›å¹³å°å¯èƒ½ä¸æ”¯æŒ
- âš ï¸ å®‰å…¨è½¯ä»¶å¯èƒ½è¯¯æŠ¥

---

**æ–¹æ¡ˆ3: ä¾èµ–ç˜¦èº«**

**ç§»é™¤unused dependencies**:
```bash
# å®‰è£…cargo-udepsï¼ˆéœ€è¦nightlyï¼‰
cargo +nightly install cargo-udeps

# æ£€æŸ¥æœªä½¿ç”¨çš„ä¾èµ–
cargo +nightly udeps
```

**ä½¿ç”¨è½»é‡æ›¿ä»£**:
```toml
# âŒ é‡é‡çº§
[dependencies]
regex = "1.10"        # å®Œæ•´æ­£åˆ™å¼•æ“
serde_json = "1.0"    # æ ‡å‡†JSON

# âœ… è½»é‡çº§
[dependencies]
regex-lite = "0.1"    # è½»é‡æ­£åˆ™ï¼ˆç®€å•åœºæ™¯ï¼‰
simd-json = "0.13"    # SIMDåŠ é€ŸJSON
```

**å¯¹æ¯”**:
```
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
åº“å¤§å°å¯¹æ¯”
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
åŠŸèƒ½          æ ‡å‡†åº“    è½»é‡åº“     èŠ‚çœ
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
æ­£åˆ™è¡¨è¾¾å¼    450KB    80KB       -82%
JSONè§£æ      280KB    180KB      -36%
HTTPå®¢æˆ·ç«¯    650KB    320KB      -51%
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
```

---

**æ–¹æ¡ˆ4: åŠ¨æ€é“¾æ¥ï¼ˆé€‚ç”¨äºç‰¹å®šåœºæ™¯ï¼‰**

**åœºæ™¯**: å¤šä¸ªäºŒè¿›åˆ¶å…±äº«ä¾èµ–

```toml
[profile.release]
# å¯ç”¨åŠ¨æ€é“¾æ¥
rpath = true

[dependencies]
# ä½¿ç”¨ç³»ç»Ÿåº“
openssl = { version = "0.10", features = ["vendored"] }
```

**æ•ˆæœ**:
```
å•ä¸ªäºŒè¿›åˆ¶: 2.8MB â†’ 0.8MB
ä½†éœ€è¦: libstd.so (8MB) å…±äº«
é€‚åˆ: å¤šä¸ªå·¥å…·å…±å­˜çš„æƒ…å†µ
```

---

#### 1.2.4 æœ€ç»ˆä¼˜åŒ–é…ç½®

**ç”Ÿäº§ç¯å¢ƒæ¨è**:

```toml
[profile.release]
opt-level = "z"
strip = "symbols"
lto = "fat"
codegen-units = 1
panic = "abort"

# å…³é—­æº¢å‡ºæ£€æŸ¥ï¼ˆreleaseé»˜è®¤ï¼‰
overflow-checks = false

# å…³é—­è°ƒè¯•æ–­è¨€
debug-assertions = false

[dependencies]
# ç²¾ç®€features
tokio = { version = "1.40", default-features = false, features = ["rt-multi-thread", "net"] }
serde = { version = "1.0", default-features = false, features = ["derive"] }
```

**æœ€ç»ˆæ•ˆæœ**:
```
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
æœ€ç»ˆä¼˜åŒ–æ•ˆæœï¼ˆREST APIæœåŠ¡ï¼‰
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
æŒ‡æ ‡          ä¼˜åŒ–å‰    ä¼˜åŒ–å     æ”¹å–„
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
äºŒè¿›åˆ¶å¤§å°    12.5MB   1.8MB      -86%
å¯åŠ¨æ—¶é—´      180ms    95ms       -47%
å†…å­˜å ç”¨      85MB     58MB       -32%
Dockeré•œåƒ    45MB     15MB       -67%
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
```

---

### 1.3 å¢é‡ç¼–è¯‘å¤±æ•ˆ

#### 1.3.1 é—®é¢˜ç—‡çŠ¶

**æè¿°**: ä¿®æ”¹ä¸€è¡Œä»£ç åï¼Œé‡æ–°ç¼–è¯‘æ—¶é—´å’Œé¦–æ¬¡ç¼–è¯‘ç›¸åŒ

**æ£€æŸ¥æ–¹æ³•**:
```bash
# å¯ç”¨ç¼–è¯‘æ—¶é—´åˆ†æ
cargo build --timings

# ç”Ÿæˆcargo-timing.html
# æŸ¥çœ‹å“ªäº›crateè¢«é‡æ–°ç¼–è¯‘
```

#### 1.3.2 å¸¸è§åŸå› 

**åŸå› 1: ä¿®æ”¹äº†æ ¹æ¨¡å—**

```rust
// lib.rs æˆ– main.rs
pub mod config;  // ä¿®æ”¹è¿™é‡Œä¼šè§¦å‘å…¨é‡é‡ç¼–è¯‘

// âœ… æ”¹è¿›ï¼šä½¿ç”¨pub useå‡å°‘ä¾èµ–
mod config_internal;
pub use config_internal::*;
```

**åŸå› 2: å®å®šä¹‰å˜æ›´**

```rust
// macros.rs
#[macro_export]
macro_rules! my_macro {
    // ä¿®æ”¹å®å®šä¹‰ä¼šé‡æ–°ç¼–è¯‘æ‰€æœ‰ä½¿ç”¨è€…
}
```

**åŸå› 3: build.rså˜æ›´**

```rust
// build.rs
fn main() {
    // build.rsä»»ä½•å˜æ›´éƒ½ä¼šè§¦å‘é‡ç¼–è¯‘
    println!("cargo:rerun-if-changed=build.rs");
}
```

#### 1.3.3 è§£å†³æ–¹æ¡ˆ

**ä¼˜åŒ–æ¨¡å—ç»“æ„**:
```rust
// å°†ç¨³å®šä»£ç å’Œç»å¸¸å˜æ›´çš„ä»£ç åˆ†ç¦»
my_crate/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ lib.rs          # æç®€ï¼Œåªåšå¯¼å‡º
â”‚   â”œâ”€â”€ stable/         # ç¨³å®šåŠŸèƒ½
â”‚   â””â”€â”€ dev/            # å¼€å‘ä¸­åŠŸèƒ½
```

**build.rsä¼˜åŒ–**:
```rust
// build.rs
fn main() {
    // åªåœ¨ç›¸å…³æ–‡ä»¶å˜æ›´æ—¶é‡æ–°è¿è¡Œ
    println!("cargo:rerun-if-changed=proto/");
    println!("cargo:rerun-if-changed=build.rs");
    
    // ä¸è¦ä½¿ç”¨cargo:rerun-if-changed=src/
    // è¿™ä¼šå¯¼è‡´ä»»ä½•srcå˜æ›´éƒ½é‡æ–°è¿è¡Œbuild.rs
}
```

---

## 2. æ‰€æœ‰æƒç³»ç»Ÿ

### 2.1 ç§»åŠ¨è¯­ä¹‰ç†è§£

#### 2.1.1 æ ¸å¿ƒæ¦‚å¿µ

**å®šä¹‰**: Rusté€šè¿‡ç§»åŠ¨è¯­ä¹‰è½¬ç§»å€¼çš„æ‰€æœ‰æƒï¼Œé¿å…æ·±æ‹·è´

**åŸºæœ¬è§„åˆ™**:
```rust
// è§„åˆ™1: èµ‹å€¼å³ç§»åŠ¨ï¼ˆå¯¹äºéCopyç±»å‹ï¼‰
let s1 = String::from("hello");
let s2 = s1;  // s1çš„æ‰€æœ‰æƒç§»åŠ¨åˆ°s2
// println!("{}", s1);  // âŒ é”™è¯¯ï¼šs1å·²å¤±æ•ˆ

// è§„åˆ™2: Copyç±»å‹ä¾‹å¤–
let x = 42;
let y = x;  // xè¢«å¤åˆ¶ï¼ˆi32å®ç°äº†Copyï¼‰
println!("{}", x);  // âœ… OK

// è§„åˆ™3: å‡½æ•°è°ƒç”¨ä¹Ÿä¼šç§»åŠ¨
fn take_ownership(s: String) {
    println!("{}", s);
}  // såœ¨è¿™é‡Œè¢«drop

let s = String::from("hello");
take_ownership(s);
// println!("{}", s);  // âŒ é”™è¯¯ï¼šså·²è¢«ç§»åŠ¨
```

---

#### 2.1.2 å¸¸è§é”™è¯¯åœºæ™¯

**åœºæ™¯1: ä»é›†åˆä¸­å–å€¼**

```rust
// âŒ é”™è¯¯ï¼šä¸èƒ½ä»Vecä¸­moveå‡ºå…ƒç´ 
let v = vec![String::from("hello")];
let first = v[0];  // é”™è¯¯ï¼

// âœ… è§£å†³æ–¹æ¡ˆ1ï¼šå€Ÿç”¨
let first: &String = &v[0];
println!("{}", first);

// âœ… è§£å†³æ–¹æ¡ˆ2ï¼šå…‹éš†
let first: String = v[0].clone();

// âœ… è§£å†³æ–¹æ¡ˆ3ï¼šæ¶ˆè´¹Vec
let mut v = vec![String::from("hello")];
let first = v.remove(0);  // ç§»å‡ºå¹¶ç§»é™¤å…ƒç´ 

// âœ… è§£å†³æ–¹æ¡ˆ4ï¼šswap_removeï¼ˆæ›´å¿«ï¼‰
let mut v = vec![String::from("a"), String::from("b")];
let first = v.swap_remove(0);  // O(1)ï¼Œä¸ä¿æŒé¡ºåº

// âœ… è§£å†³æ–¹æ¡ˆ5ï¼šinto_iteræ¶ˆè´¹
let v = vec![String::from("a"), String::from("b")];
for item in v.into_iter() {  // æ¶ˆè´¹æ•´ä¸ªVec
    println!("{}", item);
}
```

**æ€§èƒ½å¯¹æ¯”**:
```
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Vecå…ƒç´ å–å‡ºæ–¹æ³•æ€§èƒ½å¯¹æ¯”ï¼ˆ100Kå…ƒç´ ï¼‰
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
æ–¹æ³•           æ—¶é—´å¤æ‚åº¦  å®é™…è€—æ—¶
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
å€Ÿç”¨&v[i]      O(1)       10ns
clone()        O(n)       500Î¼s
remove(i)      O(n)       2.5ms
swap_remove(i) O(1)       15ns
into_iter()    O(1)       5ns/item
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
```

---

**åœºæ™¯2: å¾ªç¯ä¸­çš„æ‰€æœ‰æƒ**

```rust
// âŒ é”™è¯¯ï¼šå¾ªç¯ä¸­move
let items = vec![String::from("a"), String::from("b")];
for i in 0..items.len() {
    let item = items[i];  // é”™è¯¯ï¼šmove out of indexed content
}

// âœ… è§£å†³æ–¹æ¡ˆ1ï¼šå€Ÿç”¨è¿­ä»£
for item in &items {
    println!("{}", item);
}

// âœ… è§£å†³æ–¹æ¡ˆ2ï¼šå¯å˜å€Ÿç”¨
for item in &mut items {
    item.push_str(" modified");
}

// âœ… è§£å†³æ–¹æ¡ˆ3ï¼šæ¶ˆè´¹è¿­ä»£
for item in items.into_iter() {  // itemsè¢«æ¶ˆè´¹
    println!("{}", item);
}  // itemsä¸å†å¯ç”¨
```

---

**åœºæ™¯3: ç»“æ„ä½“å­—æ®µç§»åŠ¨**

```rust
struct Data {
    name: String,
    value: i32,
}

let data = Data {
    name: String::from("test"),
    value: 42,
};

// âŒ é”™è¯¯ï¼šéƒ¨åˆ†move
let name = data.name;  // nameè¢«ç§»å‡º
// let value = data.value;  // é”™è¯¯ï¼šdataéƒ¨åˆ†å¤±æ•ˆ

// âœ… è§£å†³æ–¹æ¡ˆ1ï¼šå…¨éƒ¨move
let Data { name, value } = data;  // è§£æ„

// âœ… è§£å†³æ–¹æ¡ˆ2ï¼šå€Ÿç”¨
let name_ref = &data.name;
let value = data.value;  // i32æ˜¯Copy

// âœ… è§£å†³æ–¹æ¡ˆ3ï¼šclone
let name = data.name.clone();
let value = data.value;  // dataä»ç„¶æœ‰æ•ˆ
```

---

#### 2.1.3 æœ€ä½³å®è·µ

**åŸåˆ™1: ä¼˜å…ˆä½¿ç”¨å€Ÿç”¨**

```rust
// âœ… æ¨èï¼šä½¿ç”¨å¼•ç”¨
fn process(data: &str) {
    println!("{}", data);
}

let s = String::from("hello");
process(&s);  // ä¼ é€’å¼•ç”¨
process(&s);  // å¯ä»¥å¤šæ¬¡è°ƒç”¨

// âŒ ä¸æ¨èï¼šä¼ é€’æ‰€æœ‰æƒï¼ˆé™¤éç¡®å®éœ€è¦ï¼‰
fn process_owned(data: String) {
    println!("{}", data);
}

let s = String::from("hello");
process_owned(s);
// process_owned(s);  // é”™è¯¯ï¼šså·²è¢«ç§»åŠ¨
```

---

**åŸåˆ™2: è¿”å›å€¼ä¼˜åŒ–**

```rust
// âœ… ç¼–è¯‘å™¨ä¼˜åŒ–ï¼šRVO (Return Value Optimization)
fn create_large_string() -> String {
    let mut s = String::with_capacity(10000);
    s.push_str("data...");
    s  // ä¸ä¼šæ‹·è´ï¼Œç›´æ¥ç§»åŠ¨æ‰€æœ‰æƒ
}

// å†…å­˜å¸ƒå±€:
// è°ƒç”¨è€…æ ˆ -> [é¢„ç•™ç©ºé—´] -> ç›´æ¥æ„é€ String
// é›¶æ‹·è´ï¼
```

---

**åŸåˆ™3: å–„ç”¨Copy trait**

```rust
// å°æ•°æ®ç»“æ„å¯ä»¥å®ç°Copy
#[derive(Copy, Clone)]
struct Point {
    x: f64,
    y: f64,
}

let p1 = Point { x: 1.0, y: 2.0 };
let p2 = p1;  // æ‹·è´ï¼Œä¸æ˜¯ç§»åŠ¨
println!("{}, {}", p1.x, p2.x);  // âœ… OK

// æ³¨æ„ï¼šåŒ…å«éCopyå­—æ®µä¸èƒ½æ´¾ç”ŸCopy
// struct Data {
//     name: String,  // Stringä¸æ˜¯Copy
// }
```

**Copyçš„æ€§èƒ½å½±å“**:
```
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Copy vs Moveæ€§èƒ½å¯¹æ¯”
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
æ•°æ®å¤§å°      Copyè€—æ—¶   Moveè€—æ—¶   å·®å¼‚
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
8 bytes      1ns        1ns        æ— 
64 bytes     5ns        1ns        5x
512 bytes    40ns       1ns        40x
4KB          320ns      1ns        320x
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ç»“è®º: å°äº16å­—èŠ‚å»ºè®®Copyï¼Œå¦åˆ™Moveæ›´å¿«
```

---

### 2.2 å¤šå¤„å…±äº«å¯å˜æ•°æ®

#### 2.2.1 é—®é¢˜åœºæ™¯

**éœ€æ±‚**: å¤šä¸ªç»„ä»¶éœ€è¦è®¿é—®å’Œä¿®æ”¹åŒä¸€æ•°æ®

```rust
// âŒ ç¼–è¯‘é”™è¯¯ï¼šä¸èƒ½æœ‰å¤šä¸ªå¯å˜å€Ÿç”¨
let mut data = vec![1, 2, 3];
let r1 = &mut data;
let r2 = &mut data;  // é”™è¯¯ï¼
r1.push(4);
r2.push(5);
```

---

#### 2.2.2 è§£å†³æ–¹æ¡ˆçŸ©é˜µ

```
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
å…±äº«å¯å˜æ•°æ®æ–¹æ¡ˆé€‰æ‹©
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
åœºæ™¯             æ¨èæ–¹æ¡ˆ          æ€§èƒ½    å¤æ‚åº¦
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
å•çº¿ç¨‹           RefCell<T>        é«˜      ä½
å¤šçº¿ç¨‹å…±äº«       Arc<Mutex<T>>     ä¸­      ä¸­
å¤šçº¿ç¨‹è¯»å¤šå†™å°‘    Arc<RwLock<T>>    é«˜      ä¸­
å¤šçº¿ç¨‹é«˜æ€§èƒ½     Arc<AtomicXxx>    æé«˜    é«˜
å¤æ‚å¹¶å‘çŠ¶æ€     Arc<DashMap<K,V>> é«˜      ä½
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
```

---

**æ–¹æ¡ˆ1: RefCellï¼ˆå•çº¿ç¨‹å†…éƒ¨å¯å˜æ€§ï¼‰**

**ä½¿ç”¨åœºæ™¯**: å•çº¿ç¨‹ç¯å¢ƒï¼Œéœ€è¦åœ¨ä¸å¯å˜å¼•ç”¨å†…éƒ¨ä¿®æ”¹æ•°æ®

```rust
use std::cell::RefCell;
use std::rc::Rc;

struct AppState {
    count: i32,
    data: Vec<String>,
}

struct App {
    // Rc: å…±äº«æ‰€æœ‰æƒ
    // RefCell: å†…éƒ¨å¯å˜æ€§
    state: Rc<RefCell<AppState>>,
}

impl App {
    fn new() -> Self {
        Self {
            state: Rc::new(RefCell::new(AppState {
                count: 0,
                data: Vec::new(),
            })),
        }
    }
    
    fn component1(&self) {
        // è·å–å¯å˜å€Ÿç”¨
        let mut state = self.state.borrow_mut();
        state.count += 1;
        state.data.push("item".to_string());
    }  // borrow_mutè‡ªåŠ¨é‡Šæ”¾
    
    fn component2(&self) {
        // è·å–ä¸å¯å˜å€Ÿç”¨
        let state = self.state.borrow();
        println!("Count: {}", state.count);
        println!("Data: {:?}", state.data);
    }  // borrowè‡ªåŠ¨é‡Šæ”¾
}

fn main() {
    let app = App::new();
    
    app.component1();
    app.component2();
    
    // å…‹éš†Rcä¸ä¼šå…‹éš†æ•°æ®ï¼Œåªå¢åŠ å¼•ç”¨è®¡æ•°
    let app2 = App {
        state: Rc::clone(&app.state),
    };
    app2.component1();  // ä¿®æ”¹åŒä¸€æ•°æ®
}
```

**æ³¨æ„äº‹é¡¹**:
```rust
// âš ï¸ è¿è¡Œæ—¶å€Ÿç”¨æ£€æŸ¥ï¼Œå¯èƒ½panic
let mut state1 = self.state.borrow_mut();
let mut state2 = self.state.borrow_mut();  // panicï¼

// âœ… æ­£ç¡®ï¼šé™åˆ¶å€Ÿç”¨ä½œç”¨åŸŸ
{
    let mut state = self.state.borrow_mut();
    state.count += 1;
}  // å€Ÿç”¨ç»“æŸ
{
    let mut state = self.state.borrow_mut();  // OK
    state.data.clear();
}
```

**æ€§èƒ½å¼€é”€**:
```
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
RefCellæ€§èƒ½å¼€é”€
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
æ“ä½œ             å¼€é”€       è¯´æ˜
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
borrow()         ~5ns      æ£€æŸ¥å€Ÿç”¨è®¡æ•°
borrow_mut()     ~8ns      æ£€æŸ¥å¹¶è®¾ç½®æ ‡å¿—
å†…å­˜             16 bytes  Cell + å€Ÿç”¨æ ‡å¿—
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
```

---

**æ–¹æ¡ˆ2: Arc<Mutex<T>>ï¼ˆå¤šçº¿ç¨‹å…±äº«ï¼‰**

**ä½¿ç”¨åœºæ™¯**: å¤šçº¿ç¨‹éœ€è¦è®¿é—®å’Œä¿®æ”¹å…±äº«æ•°æ®

```rust
use std::sync::{Arc, Mutex};
use std::thread;

#[derive(Clone)]
struct SharedState {
    // Arc: åŸå­å¼•ç”¨è®¡æ•°ï¼ˆçº¿ç¨‹å®‰å…¨ï¼‰
    // Mutex: äº’æ–¥é”
    data: Arc<Mutex<Vec<i32>>>,
}

impl SharedState {
    fn new() -> Self {
        Self {
            data: Arc::new(Mutex::new(Vec::new())),
        }
    }
    
    fn add_item(&self, item: i32) {
        // è·å–é”
        let mut data = self.data.lock().unwrap();
        data.push(item);
    }  // é”è‡ªåŠ¨é‡Šæ”¾
    
    fn get_sum(&self) -> i32 {
        let data = self.data.lock().unwrap();
        data.iter().sum()
    }
}

fn main() {
    let state = SharedState::new();
    
    // åˆ›å»ºå¤šä¸ªçº¿ç¨‹
    let mut handles = vec![];
    
    for i in 0..10 {
        let state_clone = state.clone();  // Arc::cloneï¼Œä¸æ‹·è´æ•°æ®
        let handle = thread::spawn(move || {
            state_clone.add_item(i);
        });
        handles.push(handle);
    }
    
    // ç­‰å¾…æ‰€æœ‰çº¿ç¨‹å®Œæˆ
    for handle in handles {
        handle.await.unwrap();
    }
    
    println!("Sum: {}", state.get_sum());
}
```

**æ€§èƒ½å¼€é”€**:
```
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Mutexæ€§èƒ½å¼€é”€ï¼ˆ8çº¿ç¨‹å¹¶å‘ï¼‰
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
æ“ä½œ              å¼€é”€       è¯´æ˜
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
lock()           200-500ns  è·å–é”
unlock()         50-100ns   é‡Šæ”¾é”
ç«äº‰æƒ…å†µ         1-10Î¼s     ç­‰å¾…é”
å†…å­˜             40 bytes   Mutex overhead
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ååé‡: ~400K ops/s (é«˜ç«äº‰)
```

**é¿å…æ­»é”**:
```rust
use std::sync::{Arc, Mutex};

// âŒ å¯èƒ½æ­»é”
let lock1 = Arc::new(Mutex::new(1));
let lock2 = Arc::new(Mutex::new(2));

// çº¿ç¨‹1
{
    let l1 = lock1.lock().unwrap();
    // ...
    let l2 = lock2.lock().unwrap();  // ç­‰å¾…lock2
}

// çº¿ç¨‹2ï¼ˆåŒæ—¶è¿è¡Œï¼‰
{
    let l2 = lock2.lock().unwrap();
    // ...
    let l1 = lock1.lock().unwrap();  // ç­‰å¾…lock1 â†’ æ­»é”ï¼
}

// âœ… è§£å†³ï¼šæ€»æ˜¯æŒ‰ç›¸åŒé¡ºåºè·å–é”
// æ‰€æœ‰çº¿ç¨‹éƒ½å…ˆlock1ålock2
```

---

**æ–¹æ¡ˆ3: Arc<RwLock<T>>ï¼ˆè¯»å¤šå†™å°‘ï¼‰**

**ä½¿ç”¨åœºæ™¯**: å¤šä¸ªè¯»è€…ï¼Œå°‘æ•°å†™è€…

```rust
use std::sync::{Arc, RwLock};

struct Cache {
    data: Arc<RwLock<HashMap<String, Value>>>,
}

impl Cache {
    fn get(&self, key: &str) -> Option<Value> {
        // è·å–è¯»é”ï¼ˆå¤šä¸ªçº¿ç¨‹å¯åŒæ—¶è¯»ï¼‰
        let data = self.data.read().unwrap();
        data.get(key).cloned()
    }
    
    fn set(&self, key: String, value: Value) {
        // è·å–å†™é”ï¼ˆç‹¬å è®¿é—®ï¼‰
        let mut data = self.data.write().unwrap();
        data.insert(key, value);
    }
}
```

**æ€§èƒ½å¯¹æ¯”**:
```
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Mutex vs RwLockæ€§èƒ½å¯¹æ¯”ï¼ˆ90%è¯»10%å†™ï¼‰
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
åœºæ™¯          Mutex      RwLock     æå‡
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
çº¯è¯»          400K/s    1.2M/s     3x
è¯»å¤šå†™å°‘      350K/s    900K/s     2.6x
è¯»å†™å¹³è¡¡      300K/s    450K/s     1.5x
çº¯å†™          250K/s    200K/s     -20%
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
```

---

**æ–¹æ¡ˆ4: åŸå­ç±»å‹ï¼ˆæœ€é«˜æ€§èƒ½ï¼‰**

**ä½¿ç”¨åœºæ™¯**: ç®€å•æ•°å€¼ç±»å‹çš„å¹¶å‘ä¿®æ”¹

```rust
use std::sync::Arc;
use std::sync::atomic::{AtomicU64, Ordering};

struct Counter {
    count: Arc<AtomicU64>,
}

impl Counter {
    fn new() -> Self {
        Self {
            count: Arc::new(AtomicU64::new(0)),
        }
    }
    
    fn increment(&self) {
        self.count.fetch_add(1, Ordering::Relaxed);
    }
    
    fn get(&self) -> u64 {
        self.count.load(Ordering::Relaxed)
    }
}

// ä½¿ç”¨
let counter = Counter::new();

// å¤šçº¿ç¨‹å¹¶å‘å¢åŠ 
let handles: Vec<_> = (0..10).map(|_| {
    let c = counter.clone();
    thread::spawn(move || {
        for _ in 0..1000 {
            c.increment();
        }
    })
}).collect();

for h in handles {
    h.join().unwrap();
}

assert_eq!(counter.get(), 10000);
```

**æ€§èƒ½å¯¹æ¯”**:
```
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
å¹¶å‘è®¡æ•°å™¨æ€§èƒ½å¯¹æ¯”ï¼ˆ8çº¿ç¨‹ï¼‰
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
æ–¹æ¡ˆ              ååé‡     å»¶è¿Ÿ
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Mutex<u64>       500K/s    500ns
RwLock<u64>      450K/s    600ns
AtomicU64        5M/s      50ns
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
æå‡: 10å€
```

**Orderingé€‰æ‹©**:
```rust
// Relaxed: æœ€å¿«ï¼Œæ— åŒæ­¥ä¿è¯
count.fetch_add(1, Ordering::Relaxed);  // æ¨èï¼šç®€å•è®¡æ•°

// Acquire/Release: å»ºç«‹happens-beforeå…³ç³»
flag.store(true, Ordering::Release);
while !flag.load(Ordering::Acquire) {}

// SeqCst: æœ€å¼ºä¿è¯ï¼Œæœ€æ…¢
count.fetch_add(1, Ordering::SeqCst);  // é¿å…ï¼šé™¤éå¿…é¡»
```

---

**æ–¹æ¡ˆ5: DashMapï¼ˆæ— é”å“ˆå¸Œè¡¨ï¼‰**

```rust
use dashmap::DashMap;
use std::sync::Arc;

struct SharedCache {
    data: Arc<DashMap<String, Value>>,
}

impl SharedCache {
    fn new() -> Self {
        Self {
            data: Arc::new(DashMap::new()),
        }
    }
    
    fn insert(&self, key: String, value: Value) {
        self.data.insert(key, value);  // æ— é”æ’å…¥
    }
    
    fn get(&self, key: &str) -> Option<Value> {
        self.data.get(key).map(|r| r.value().clone())
    }
    
    fn remove(&self, key: &str) -> Option<Value> {
        self.data.remove(key).map(|(_, v)| v)
    }
}

// å¤šçº¿ç¨‹å¹¶å‘è®¿é—®ï¼Œæ— å…¨å±€é”
```

**æ€§èƒ½å¯¹æ¯”**:
```
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
å¹¶å‘å“ˆå¸Œè¡¨æ€§èƒ½å¯¹æ¯”ï¼ˆ8çº¿ç¨‹æ··åˆæ“ä½œï¼‰
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
æ–¹æ¡ˆ                    ååé‡     è¯´æ˜
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Mutex<HashMap>         200K/s    å…¨å±€é”
RwLock<HashMap>        600K/s    è¯»ä¼˜åŒ–
DashMap                3M/s      åˆ†ç‰‡é”
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
æå‡: 5-15å€
```

---

### 2.3 ä»é›†åˆä¸­å–å‡ºå…ƒç´ 

#### 2.3.1 é—®é¢˜åœºæ™¯

```rust
let vec = vec![String::from("a"), String::from("b")];
let first = vec[0];  // âŒ é”™è¯¯ï¼šcannot move out of index
```

#### 2.3.2 å®Œæ•´è§£å†³æ–¹æ¡ˆ

```rust
// æ–¹æ¡ˆ1: å€Ÿç”¨ï¼ˆæœ€å¸¸ç”¨ï¼‰
let first: &String = &vec[0];

// æ–¹æ¡ˆ2: å…‹éš†
let first: String = vec[0].clone();

// æ–¹æ¡ˆ3: removeï¼ˆç§»é™¤å…ƒç´ ï¼‰
let mut vec = vec![String::from("a"), String::from("b")];
let first = vec.remove(0);  // O(n)ï¼Œä¿æŒé¡ºåº

// æ–¹æ¡ˆ4: swap_removeï¼ˆæ›´å¿«ï¼‰
let first = vec.swap_remove(0);  // O(1)ï¼Œä¸ä¿æŒé¡ºåº

// æ–¹æ¡ˆ5: into_iterï¼ˆæ¶ˆè´¹æ•´ä¸ªVecï¼‰
for item in vec.into_iter() {
    // è·å¾—æ‰€æœ‰æƒ
}

// æ–¹æ¡ˆ6: OptionåŒ…è£…ï¼ˆæ¨èï¼šé¢‘ç¹å–å‡ºåœºæ™¯ï¼‰
let mut vec = vec![Some(String::from("a")), Some(String::from("b"))];
let first = vec[0].take();  // å–å‡ºï¼Œç•™ä¸‹None

// æ–¹æ¡ˆ7: split_offï¼ˆåˆ†å‰²Vecï¼‰
let mut vec = vec![String::from("a"), String::from("b"), String::from("c")];
let tail = vec.split_off(1);  // vec=[a], tail=[b,c]
```

**æ€§èƒ½å¯¹æ¯”**:
```
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Vecå…ƒç´ å–å‡ºæ–¹æ¡ˆæ€§èƒ½ï¼ˆ10ä¸‡å…ƒç´ Vecï¼‰
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
æ–¹æ¡ˆ            æ—¶é—´å¤æ‚åº¦  å®é™…è€—æ—¶    å‰¯ä½œç”¨
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
å€Ÿç”¨&vec[i]     O(1)       10ns       æ— 
clone()         O(n)       500Î¼s      å†…å­˜ç¿»å€
remove(0)       O(n)       2.5ms      å…ƒç´ ç§»åŠ¨
swap_remove(0)  O(1)       15ns       é¡ºåºç ´å
into_iter()     O(1)/item  5ns/item   Vecæ¶ˆè´¹
take()          O(1)       20ns       ç•™ä¸‹None
split_off(i)    O(n-i)     1.2ms      Vecåˆ†è£‚
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
```

---

## 3. ç”Ÿå‘½å‘¨æœŸ

### 3.1 ç”Ÿå‘½å‘¨æœŸæ¨å¯¼è§„åˆ™

#### 3.1.1 ä¸‰å¤§æ¨å¯¼è§„åˆ™

**è§„åˆ™1: æ¯ä¸ªå¼•ç”¨å‚æ•°è·å¾—ç‹¬ç«‹ç”Ÿå‘½å‘¨æœŸ**

```rust
// ç¼–è¯‘å™¨æ¨å¯¼
fn foo(x: &str, y: &str) {
    // ...
}

// ç­‰ä»·äº
fn foo<'a, 'b>(x: &'a str, y: &'b str) {
    // ...
}
```

**è§„åˆ™2: åªæœ‰ä¸€ä¸ªè¾“å…¥ç”Ÿå‘½å‘¨æœŸï¼Œèµ‹ç»™æ‰€æœ‰è¾“å‡º**

```rust
// ç¼–è¯‘å™¨æ¨å¯¼
fn first_word(s: &str) -> &str {
    // ...
}

// ç­‰ä»·äº
fn first_word<'a>(s: &'a str) -> &'a str {
    // ...
}
```

**è§„åˆ™3: æœ‰&selfæˆ–&mut selfï¼Œè¾“å‡ºç”Ÿå‘½å‘¨æœŸç»§æ‰¿self**

```rust
impl MyStruct {
    // ç¼–è¯‘å™¨æ¨å¯¼
    fn get_name(&self) -> &str {
        &self.name
    }
    
    // ç­‰ä»·äº
    fn get_name<'a>(&'a self) -> &'a str {
        &self.name
    }
}
```

---

#### 3.1.2 å¤æ‚åœºæ™¯

**åœºæ™¯1: è¿”å›ä¸¤ä¸ªå¼•ç”¨ä¸­è¾ƒçŸ­çš„ç”Ÿå‘½å‘¨æœŸ**

```rust
// æ‰‹åŠ¨æ ‡æ³¨ï¼šä¸¤ä¸ªè¾“å…¥ï¼Œä¸€ä¸ªè¾“å‡º
fn longest<'a>(x: &'a str, y: &'a str) -> &'a str {
    if x.len() > y.len() { x } else { y }
}

// ä½¿ç”¨ç¤ºä¾‹
let string1 = String::from("long string");
let result;
{
    let string2 = String::from("short");
    result = longest(&string1, &string2);
    println!("{}", result);  // âœ… OKï¼šåœ¨ä¸¤è€…ç”Ÿå‘½å‘¨æœŸå†…
}
// println!("{}", result);  // âŒ é”™è¯¯ï¼šstring2å·²é”€æ¯
```

**ç”Ÿå‘½å‘¨æœŸå…³ç³»**:
```
string1: |<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>|
string2:       |<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>|
result:        |<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>|  (å–è¾ƒçŸ­çš„)
```

---

**åœºæ™¯2: ç‹¬ç«‹çš„è¾“å…¥è¾“å‡ºç”Ÿå‘½å‘¨æœŸ**

```rust
// è¿”å›å€¼ç”Ÿå‘½å‘¨æœŸåªä¾èµ–ç¬¬ä¸€ä¸ªå‚æ•°
fn first<'a, 'b>(x: &'a str, y: &'b str) -> &'a str {
    x
}

// ä½¿ç”¨
let string1 = String::from("hello");
{
    let string2 = String::from("world");
    let result = first(&string1, &string2);
    // resultåªç»‘å®šåˆ°string1
}  // string2é”€æ¯ï¼Œresultä»æœ‰æ•ˆ
```

---

**åœºæ™¯3: é™æ€ç”Ÿå‘½å‘¨æœŸ**

```rust
// 'static: æ•´ä¸ªç¨‹åºè¿è¡ŒæœŸé—´æœ‰æ•ˆ
let s: &'static str = "hello";  // å­—ç¬¦ä¸²å­—é¢é‡

// è¿”å›é™æ€ç”Ÿå‘½å‘¨æœŸ
fn get_static() -> &'static str {
    "static string"
}

// æ³¨æ„ï¼šä¸è¦æ»¥ç”¨'static
// âŒ ä¸å¿…è¦çš„static
fn bad(s: String) -> &'static str {
    Box::leak(s.into_boxed_str())  // å†…å­˜æ³„æ¼ï¼
}

// âœ… æ­£ç¡®åšæ³•
fn good(s: String) -> String {
    s  // è¿”å›æ‰€æœ‰æƒ
}
```

---

### 3.2 è¿”å›å¼•ç”¨çš„å‡½æ•°

#### 3.2.1 å¸¸è§é”™è¯¯

```rust
// âŒ é”™è¯¯1: è¿”å›å±€éƒ¨å˜é‡å¼•ç”¨
fn dangle() -> &str {
    let s = String::from("hello");
    &s  // é”™è¯¯ï¼šsåœ¨å‡½æ•°ç»“æŸæ—¶é”€æ¯
}

// âŒ é”™è¯¯2: è¿”å›ä¸´æ—¶å€¼å¼•ç”¨
fn temp_ref() -> &String {
    &String::from("hello")  // ä¸´æ—¶Stringç«‹å³é”€æ¯
}
```

#### 3.2.2 æ­£ç¡®åšæ³•

```rust
// âœ… æ–¹æ¡ˆ1: è¿”å›æ‹¥æœ‰çš„å€¼
fn return_owned() -> String {
    String::from("hello")
}

// âœ… æ–¹æ¡ˆ2: ä½¿ç”¨é™æ€ç”Ÿå‘½å‘¨æœŸ
fn return_static() -> &'static str {
    "hello"  // å­—ç¬¦ä¸²å­—é¢é‡
}

// âœ… æ–¹æ¡ˆ3: æ¥å—å¼•ç”¨ï¼Œè¿”å›å¼•ç”¨
fn extract<'a>(s: &'a str) -> &'a str {
    &s[0..5]  // è¿”å›è¾“å…¥çš„ä¸€éƒ¨åˆ†
}

// âœ… æ–¹æ¡ˆ4: ç»“æ„ä½“æ–¹æ³•è¿”å›å†…éƒ¨å¼•ç”¨
struct Container {
    data: String,
}

impl Container {
    fn get_data(&self) -> &str {
        &self.data  // ç»‘å®šåˆ°selfçš„ç”Ÿå‘½å‘¨æœŸ
    }
}
```

---

### 3.3 ç»“æ„ä½“ç”Ÿå‘½å‘¨æœŸ

#### 3.3.1 åŸºæœ¬ç”¨æ³•

```rust
// ç»“æ„ä½“åŒ…å«å¼•ç”¨å¿…é¡»æ ‡æ³¨ç”Ÿå‘½å‘¨æœŸ
struct Parser<'a> {
    input: &'a str,
    pos: usize,
}

impl<'a> Parser<'a> {
    fn new(input: &'a str) -> Self {
        Parser { input, pos: 0 }
    }
    
    // è¿”å›çš„å¼•ç”¨ç»‘å®šåˆ°ç»“æ„ä½“ç”Ÿå‘½å‘¨æœŸ
    fn peek(&self) -> Option<&'a str> {
        if self.pos < self.input.len() {
            Some(&self.input[self.pos..])
        } else {
            None
        }
    }
    
    fn advance(&mut self) {
        self.pos += 1;
    }
}

// ä½¿ç”¨ç¤ºä¾‹
fn use_parser() {
    let data = String::from("hello world");
    let mut parser = Parser::new(&data);
    
    if let Some(text) = parser.peek() {
        println!("{}", text);
    }
    
    parser.advance();
}  // parser, dataæŒ‰é¡ºåºé”€æ¯
```

**ç”Ÿå‘½å‘¨æœŸå…³ç³»**:
```
data:   |<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>|
parser:    |<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>|  (ä¾èµ–data)
text:      |<â”€â”€>|                       (ä¾èµ–parser)
```

---

#### 3.3.2 å¤šä¸ªç”Ÿå‘½å‘¨æœŸå‚æ•°

```rust
struct Context<'a, 'b> {
    config: &'a Config,
    data: &'b mut Data,
}

impl<'a, 'b> Context<'a, 'b> {
    fn process(&mut self) {
        // config: ä¸å¯å˜å€Ÿç”¨ï¼Œé•¿ç”Ÿå‘½å‘¨æœŸ
        // data: å¯å˜å€Ÿç”¨ï¼Œå¯èƒ½çŸ­ç”Ÿå‘½å‘¨æœŸ
    }
}
```

---

## 4. Async/Awaitæœºåˆ¶

### 4.1 å¼‚æ­¥ä¸å¤šçº¿ç¨‹åŒºåˆ«

#### 4.1.1 æœ¬è´¨åŒºåˆ«

**æ·±åº¦å¯¹æ¯”**:

```
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
å¼‚æ­¥ vs å¤šçº¿ç¨‹æ ¸å¿ƒåŒºåˆ«
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ç»´åº¦          å¤šçº¿ç¨‹          å¼‚æ­¥
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
æ‰§è¡Œæ¨¡å‹      å¹¶è¡Œ            å¹¶å‘
è°ƒåº¦å™¨        OSå†…æ ¸          ç”¨æˆ·ç©ºé—´Runtime
ä¸Šä¸‹æ–‡åˆ‡æ¢     1-10Î¼s         50-100ns
å†…å­˜å¼€é”€      2MB/çº¿ç¨‹        0.1-1KB/ä»»åŠ¡
æœ€å¤§æ•°é‡      1K-10K         100K-1M
CPUåˆ©ç”¨       100%           çœ‹ä»»åŠ¡ç±»å‹
é€‚ç”¨åœºæ™¯      CPUå¯†é›†        IOå¯†é›†
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
```

---

#### 4.1.2 ä»£ç ç¤ºä¾‹å¯¹æ¯”

**æ–¹å¼1: å¤šçº¿ç¨‹ï¼ˆOSçº¿ç¨‹ï¼‰**

```rust
use std::thread;
use std::time::Duration;

fn cpu_bound_task(id: u32) -> u32 {
    // CPUå¯†é›†è®¡ç®—
    (0..10_000_000).sum::<u32>() + id
}

fn main() {
    let handles: Vec<_> = (0..4).map(|i| {
        thread::spawn(move || {
            cpu_bound_task(i)
        })
    }).collect();
    
    for handle in handles {
        let result = handle.join().unwrap();
        println!("Result: {}", result);
    }
}

// ç‰¹ç‚¹:
// - 4ä¸ªOSçº¿ç¨‹çœŸå¹¶è¡Œ
// - æ¯çº¿ç¨‹~2MBæ ˆç©ºé—´
// - é€‚åˆCPUå¯†é›†ä»»åŠ¡
```

**èµ„æºä½¿ç”¨**:
```
4ä¸ªçº¿ç¨‹:
- å†…å­˜: 8MB (4 * 2MBæ ˆ)
- CPU: 400% (4æ ¸æ»¡è½½)
- ä¸Šä¸‹æ–‡åˆ‡æ¢: ~1000æ¬¡/ç§’
```

---

**æ–¹å¼2: å¼‚æ­¥ï¼ˆåç¨‹ï¼‰**

```rust
use tokio;
use std::time::Duration;

async fn io_bound_task(id: u32) -> u32 {
    // IOå¯†é›†æ“ä½œ
    tokio::time::sleep(Duration::from_millis(100)).await;
    id * 2
}

#[tokio::main]
async fn main() {
    let tasks: Vec<_> = (0..10000).map(|i| {
        tokio::spawn(io_bound_task(i))
    }).collect();
    
    for task in tasks {
        let result = task.await.unwrap();
        println!("Result: {}", result);
    }
}

// ç‰¹ç‚¹:
// - 10000ä¸ªä»»åŠ¡å…±äº«å°‘æ•°çº¿ç¨‹
// - æ¯ä»»åŠ¡~0.1KBå†…å­˜
// - é€‚åˆIOå¯†é›†ä»»åŠ¡
```

**èµ„æºä½¿ç”¨**:
```
10000ä¸ªä»»åŠ¡:
- å†…å­˜: 1MB (10000 * 0.1KB)
- CPU: 100% (æ ¹æ®æ ¸å¿ƒæ•°)
- ä¸Šä¸‹æ–‡åˆ‡æ¢: ~100,000æ¬¡/ç§’ï¼ˆç”¨æˆ·ç©ºé—´ï¼‰
```

---

#### 4.1.3 é€‰æ‹©æŒ‡å—

**CPUå¯†é›†å‹ â†’ ä½¿ç”¨çº¿ç¨‹**

```rust
use rayon::prelude::*;

// å›¾åƒå¤„ç†ã€è§†é¢‘ç¼–ç ã€åŠ å¯†è®¡ç®—ç­‰
fn process_image(image: &Image) -> ProcessedImage {
    image.pixels
        .par_iter()  // Rayonå¹¶è¡Œè¿­ä»£
        .map(|pixel| heavy_computation(pixel))
        .collect()
}

// ç‰¹ç‚¹:
// - å……åˆ†åˆ©ç”¨å¤šæ ¸
// - æ¯æ ¸å¿ƒä¸€ä¸ªçº¿ç¨‹
// - çœŸæ­£çš„å¹¶è¡Œæ‰§è¡Œ
```

---

**IOå¯†é›†å‹ â†’ ä½¿ç”¨å¼‚æ­¥**

```rust
use tokio;

// ç½‘ç»œè¯·æ±‚ã€æ–‡ä»¶IOã€æ•°æ®åº“æŸ¥è¯¢ç­‰
async fn fetch_all_urls(urls: Vec<String>) -> Vec<Response> {
    let tasks: Vec<_> = urls.into_iter()
        .map(|url| tokio::spawn(fetch_url(url)))
        .collect();
    
    let mut results = Vec::new();
    for task in tasks {
        results.push(task.await.unwrap());
    }
    results
}

async fn fetch_url(url: String) -> Response {
    reqwest::get(&url).await.unwrap()
}

// ç‰¹ç‚¹:
// - é«˜å¹¶å‘ï¼ˆ10K+è¯·æ±‚ï¼‰
// - ä½èµ„æºå ç”¨
// - ç­‰å¾…IOæ—¶åˆ‡æ¢ä»»åŠ¡
```

---

**æ··åˆåœºæ™¯ â†’ ç»„åˆä½¿ç”¨**

```rust
use tokio;
use rayon::prelude::*;

async fn hybrid_processing() {
    // 1. å¼‚æ­¥è·å–æ•°æ®
    let data = fetch_data_async().await;
    
    // 2. åŒæ­¥CPUå¯†é›†è®¡ç®—ï¼ˆä½¿ç”¨çº¿ç¨‹æ± ï¼‰
    let processed = tokio::task::spawn_blocking(|| {
        data.par_iter()
            .map(|item| heavy_compute(item))
            .collect::<Vec<_>>()
    }).await.unwrap();
    
    // 3. å¼‚æ­¥å†™å›ç»“æœ
    save_results_async(processed).await;
}

// spawn_blockingï¼šåœ¨ä¸“é—¨çš„çº¿ç¨‹æ± è¿è¡Œé˜»å¡ä»»åŠ¡
```

---

### 4.2 åŒæ­¥ä»£ç è°ƒç”¨å¼‚æ­¥

#### 4.2.1 é—®é¢˜åœºæ™¯

```rust
async fn fetch_data() -> Data {
    // å¼‚æ­¥æ“ä½œ
}

fn sync_caller() {
    let data = fetch_data();  // âŒ å¾—åˆ°Future<Output=Data>ï¼Œä¸æ˜¯Data
    // å¦‚ä½•è·å–ç»“æœï¼Ÿ
}
```

---

#### 4.2.2 è§£å†³æ–¹æ¡ˆ

**æ–¹æ¡ˆ1: block_onï¼ˆåœ¨åŒæ­¥ä¸Šä¸‹æ–‡ä¸­è¿è¡Œå¼‚æ­¥ï¼‰**

```rust
use tokio::runtime::Runtime;

fn sync_main() {
    // åˆ›å»ºRuntime
    let rt = Runtime::new().unwrap();
    
    // é˜»å¡å½“å‰çº¿ç¨‹ï¼Œè¿è¡Œå¼‚æ­¥å‡½æ•°
    let data = rt.block_on(async {
        fetch_data().await
    });
    
    println!("Data: {:?}", data);
}

// æˆ–ä½¿ç”¨tokio::mainç®€åŒ–
#[tokio::main]
async fn main() {
    let data = fetch_data().await;
    println!("Data: {:?}", data);
}
```

**æ€§èƒ½å¼€é”€**:
```
block_onè°ƒç”¨:
- å¯åŠ¨Runtime: 1-5msï¼ˆé¦–æ¬¡ï¼‰
- ä»»åŠ¡è°ƒåº¦: <100ns
- æ€»å¼€é”€: å¯å¿½ç•¥ï¼ˆå¯¹äºIOä»»åŠ¡ï¼‰
```

---

**æ–¹æ¡ˆ2: spawn_blockingï¼ˆä»å¼‚æ­¥è°ƒç”¨åŒæ­¥ï¼‰**

```rust
async fn async_context() {
    // åœ¨ä¸“é—¨çº¿ç¨‹æ± è¿è¡Œé˜»å¡æ“ä½œ
    let result = tokio::task::spawn_blocking(|| {
        // åŒæ­¥/é˜»å¡ä»£ç 
        std::thread::sleep(Duration::from_secs(1));
        expensive_computation()
    }).await.unwrap();
    
    println!("Result: {}", result);
}
```

**ç”¨é€”**:
- æ–‡ä»¶IOï¼ˆåŒæ­¥ï¼‰
- CPUå¯†é›†è®¡ç®—
- è°ƒç”¨ä¸æ”¯æŒasyncçš„åº“

**çº¿ç¨‹æ± é…ç½®**:
```toml
# ç¯å¢ƒå˜é‡
TOKIO_BLOCKING_THREADS=512  # æœ€å¤š512ä¸ªé˜»å¡çº¿ç¨‹

# æˆ–ä»£ç é…ç½®
tokio::runtime::Builder::new_multi_thread()
    .max_blocking_threads(512)
    .build()
```

---

**æ–¹æ¡ˆ3: åˆ†å±‚æ¶æ„ï¼ˆæ¨èï¼‰**

```rust
// APIå±‚ï¼šå¼‚æ­¥
#[tokio::main]
async fn main() {
    let app = create_app();
    axum::serve(listener, app).await.unwrap();
}

// ä¸šåŠ¡å±‚ï¼šå¼‚æ­¥
async fn handle_request(req: Request) -> Response {
    let data = business_logic(req.data).await;
    Response::new(data)
}

// ä¸šåŠ¡é€»è¾‘ï¼šå¼‚æ­¥
async fn business_logic(input: Input) -> Output {
    let db_data = repository_layer::fetch(input.id).await;
    transform(db_data)  // åŒæ­¥è½¬æ¢
}

// æ•°æ®å±‚ï¼šå¼‚æ­¥
mod repository_layer {
    pub async fn fetch(id: u64) -> Data {
        sqlx::query!("SELECT * FROM table WHERE id = ?", id)
            .fetch_one(&pool)
            .await
            .unwrap()
    }
}
```

---

### 4.3 å¼‚æ­¥æ€§èƒ½ä¼˜åŒ–

#### 4.3.1 é¿å…ä¸å¿…è¦çš„await

```rust
// âŒ ä¸²è¡Œæ‰§è¡Œï¼ˆæ…¢ï¼‰
async fn sequential() {
    let data1 = fetch1().await;  // ç­‰å¾…100ms
    let data2 = fetch2().await;  // ç­‰å¾…100ms
    // æ€»è®¡: 200ms
}

// âœ… å¹¶è¡Œæ‰§è¡Œï¼ˆå¿«ï¼‰
async fn parallel() {
    let (data1, data2) = tokio::join!(
        fetch1(),  // åŒæ—¶å‘èµ·
        fetch2(),
    );
    // æ€»è®¡: 100ms
}

// âœ… æ‰¹é‡å¹¶è¡Œ
async fn batch_parallel(urls: Vec<String>) {
    let tasks: Vec<_> = urls.into_iter()
        .map(|url| tokio::spawn(fetch_url(url)))
        .collect();
    
    let results = futures::future::join_all(tasks).await;
}
```

**æ€§èƒ½å¯¹æ¯”**:
```
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ä¸²è¡Œvså¹¶è¡Œï¼ˆ100ä¸ª100msçš„è¯·æ±‚ï¼‰
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
æ–¹å¼          æ€»è€—æ—¶     ååé‡
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ä¸²è¡Œawait     10ç§’      10 req/s
å¹¶è¡Œjoin!     100ms     1000 req/s
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
æå‡: 100å€
```

---

#### 4.3.2 ä½¿ç”¨Bufferå’Œæ‰¹é‡å¤„ç†

```rust
use tokio::sync::mpsc;
use tokio_stream::{StreamExt, wrappers::ReceiverStream};

async fn buffered_processing() {
    let (tx, rx) = mpsc::channel(1000);
    
    // ç”Ÿäº§è€…
    tokio::spawn(async move {
        for i in 0..100000 {
            tx.send(i).await.unwrap();
        }
    });
    
    // æ¶ˆè´¹è€…ï¼šæ‰¹é‡å¤„ç†
    let stream = ReceiverStream::new(rx);
    
    stream
        .chunks_timeout(100, Duration::from_millis(10))  // æ‰¹é‡æˆ–è¶…æ—¶
        .for_each(|batch| async move {
            process_batch(batch).await;  // æ‰¹é‡å¤„ç†é™ä½å¼€é”€
        })
        .await;
}

async fn process_batch(items: Vec<i32>) {
    // æ‰¹é‡æ•°æ®åº“æ’å…¥ã€æ‰¹é‡ç½‘ç»œè¯·æ±‚ç­‰
    println!("Processing batch of {} items", items.len());
}
```

**æ€§èƒ½æå‡**:
```
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
å•æ¡vsæ‰¹é‡å¤„ç†ï¼ˆ10ä¸‡æ¡æ•°æ®åº“æ’å…¥ï¼‰
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
æ–¹å¼          è€—æ—¶      ååé‡
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
é€æ¡æ’å…¥      100s     1K/s
æ‰¹é‡100æ¡     5s       20K/s
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
æå‡: 20å€
```

---

#### 4.3.3 åˆç†è®¾ç½®è¶…æ—¶

```rust
use tokio::time::{timeout, Duration};

async fn with_timeout() {
    match timeout(Duration::from_secs(5), slow_operation()).await {
        Ok(Ok(result)) => println!("Success: {:?}", result),
        Ok(Err(e)) => println!("Operation failed: {}", e),
        Err(_) => println!("Timeout after 5s"),
    }
}

// å¤šçº§è¶…æ—¶
async fn layered_timeout() {
    // æ•´ä½“è¶…æ—¶10ç§’
    timeout(Duration::from_secs(10), async {
        // æ¯ä¸ªè¯·æ±‚è¶…æ—¶2ç§’
        for url in urls {
            let result = timeout(
                Duration::from_secs(2),
                fetch_url(url)
            ).await;
            
            match result {
                Ok(Ok(data)) => process(data),
                _ => continue,  // å•ä¸ªå¤±è´¥ä¸å½±å“æ•´ä½“
            }
        }
    }).await
}
```

---

## ğŸ“š ç›¸å…³èµ„æº

### å†…éƒ¨é“¾æ¥
- ğŸ“– [å¿«é€Ÿå‚è€ƒæ‰‹å†Œ](./RUST_QUICK_REFERENCE_2025.md)
- ğŸ’» [ä»£ç ç¤ºä¾‹é›†](./RUST_CODE_EXAMPLES_2025.md)
- âš¡ [æ€§èƒ½ä¼˜åŒ–æ‰‹å†Œ](./PERFORMANCE_OPTIMIZATION_COOKBOOK_2025.md)
- ğŸ—ºï¸ [çŸ¥è¯†å›¾è°±](./RUST_KNOWLEDGE_GRAPH_2025_10.md)

### å¤–éƒ¨èµ„æº
- ğŸ¦€ [Rustå®˜æ–¹æ–‡æ¡£](https://doc.rust-lang.org/)
- ğŸ“š [Rustè¯­è¨€åœ£ç»](https://course.rs/)
- ğŸ“ [Rust By Example](https://doc.rust-lang.org/rust-by-example/)

---

## ğŸ”„ æ›´æ–°è®¡åˆ’

- [ ] è¡¥å……é”™è¯¯å¤„ç†ç« èŠ‚
- [ ] æ·»åŠ æ€§èƒ½é—®é¢˜è¯Šæ–­ç« èŠ‚
- [ ] æ‰©å±•å¹¶å‘ç¼–ç¨‹ç« èŠ‚
- [ ] å¢åŠ Traitç³»ç»Ÿæ·±åº¦å†…å®¹

---

**æ–‡æ¡£ç‰ˆæœ¬**: 2.0  
**æœ€åæ›´æ–°**: 2025å¹´10æœˆ28æ—¥  
**ç»´æŠ¤è€…**: OTLP_rustæ–‡æ¡£å›¢é˜Ÿ  
**ä¸‹ä¸€æ¬¡å®¡æŸ¥**: 2025å¹´11æœˆ28æ—¥

---

> **é˜…è¯»æç¤º**: 
> - æ¯ä¸ªé—®é¢˜åŒ…å«å®Œæ•´ç¤ºä¾‹ä»£ç 
> - æ€§èƒ½æ•°æ®åŸºäºå®é™…æµ‹è¯•
> - å»ºè®®ç»“åˆå¿«é€Ÿå‚è€ƒæ‰‹å†Œä½¿ç”¨

**Happy Coding! ğŸ¦€**
