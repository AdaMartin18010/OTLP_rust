# APIå‚è€ƒçŸ¥è¯†å›¾è°±

**ç‰ˆæœ¬**: 1.0  
**æ—¥æœŸ**: 2025å¹´10æœˆ28æ—¥  
**çŠ¶æ€**: âœ… å®Œæ•´

---

## ğŸ“‹ ç›®å½•

1. [æ¦‚å¿µç½‘ç»œ](#1-æ¦‚å¿µç½‘ç»œ)
2. [APIåˆ†ç±»ä½“ç³»](#2-apiåˆ†ç±»ä½“ç³»)
3. [æ¦‚å¿µå…³ç³»çŸ©é˜µ](#3-æ¦‚å¿µå…³ç³»çŸ©é˜µ)
4. [å±‚æ¬¡ç»“æ„](#4-å±‚æ¬¡ç»“æ„)
5. [ä½¿ç”¨åœºæ™¯æ˜ å°„](#5-ä½¿ç”¨åœºæ™¯æ˜ å°„)

---

## 1. æ¦‚å¿µç½‘ç»œ

### 1.1 æ ¸å¿ƒæ¦‚å¿µå›¾

```mermaid
graph TB
    OTLP[OTLPåè®®] --> TRACES[Traces API]
    OTLP --> METRICS[Metrics API]
    OTLP --> LOGS[Logs API]
    
    TRACES --> SPAN[Span]
    TRACES --> TRACER[Tracer]
    
    METRICS --> COUNTER[Counter]
    METRICS --> GAUGE[Gauge]
    METRICS --> HISTOGRAM[Histogram]
    
    LOGS --> LOGEVENT[LogEvent]
    LOGS --> LOGGER[Logger]
    
    SPAN --> ATTRIBUTES[Attributes]
    SPAN --> EVENTS[Events]
    SPAN --> LINKS[Links]
    
    ATTRIBUTES --> SEMANTIC[SemanticConventions]
    
    OTLP --> COMPRESSION[Compression]
    COMPRESSION --> GZIP[Gzip]
    COMPRESSION --> BROTLI[Brotli]
    COMPRESSION --> ZSTD[Zstd]
    
    OTLP --> PROFILING[Profiling]
    PROFILING --> CPU[CPU Profile]
    PROFILING --> MEMORY[Memory Profile]
    
    OTLP --> SIMD[SIMDä¼˜åŒ–]
    SIMD --> AVX[AVX]
    SIMD --> NEON[NEON]
```

---

## 2. APIåˆ†ç±»ä½“ç³»

### 2.1 æŒ‰åŠŸèƒ½åˆ†ç±»

```
APIä½“ç³»
â”œâ”€â”€ 1. æ•°æ®é‡‡é›†API
â”‚   â”œâ”€â”€ 1.1 Traces API
â”‚   â”‚   â”œâ”€â”€ create_span()
â”‚   â”‚   â”œâ”€â”€ end_span()
â”‚   â”‚   â””â”€â”€ add_event()
â”‚   â”œâ”€â”€ 1.2 Metrics API
â”‚   â”‚   â”œâ”€â”€ record_counter()
â”‚   â”‚   â”œâ”€â”€ record_gauge()
â”‚   â”‚   â””â”€â”€ record_histogram()
â”‚   â””â”€â”€ 1.3 Logs API
â”‚       â”œâ”€â”€ emit_log()
â”‚       â””â”€â”€ add_log_attributes()
â”‚
â”œâ”€â”€ 2. æ•°æ®å¤„ç†API
â”‚   â”œâ”€â”€ 2.1 å‹ç¼©API
â”‚   â”‚   â”œâ”€â”€ compress_gzip()
â”‚   â”‚   â”œâ”€â”€ compress_brotli()
â”‚   â”‚   â””â”€â”€ compress_zstd()
â”‚   â”œâ”€â”€ 2.2 åºåˆ—åŒ–API
â”‚   â”‚   â”œâ”€â”€ to_protobuf()
â”‚   â”‚   â””â”€â”€ to_json()
â”‚   â””â”€â”€ 2.3 æ‰¹å¤„ç†API
â”‚       â”œâ”€â”€ batch_spans()
â”‚       â””â”€â”€ flush()
â”‚
â”œâ”€â”€ 3. ä¼ è¾“API
â”‚   â”œâ”€â”€ 3.1 gRPC API
â”‚   â”‚   â”œâ”€â”€ send_traces()
â”‚   â”‚   â”œâ”€â”€ send_metrics()
â”‚   â”‚   â””â”€â”€ send_logs()
â”‚   â””â”€â”€ 3.2 HTTP API
â”‚       â”œâ”€â”€ post_traces()
â”‚       â”œâ”€â”€ post_metrics()
â”‚       â””â”€â”€ post_logs()
â”‚
â”œâ”€â”€ 4. æ€§èƒ½ä¼˜åŒ–API
â”‚   â”œâ”€â”€ 4.1 SIMD API
â”‚   â”‚   â”œâ”€â”€ simd_serialize()
â”‚   â”‚   â””â”€â”€ simd_compress()
â”‚   â””â”€â”€ 4.2 Profiling API
â”‚       â”œâ”€â”€ start_profiling()
â”‚       â””â”€â”€ collect_profile()
â”‚
â””â”€â”€ 5. è¯­ä¹‰çº¦å®šAPI
    â”œâ”€â”€ 5.1 Resource API
    â”œâ”€â”€ 5.2 Service API
    â””â”€â”€ 5.3 Span Attributes API
```

---

## 3. æ¦‚å¿µå…³ç³»çŸ©é˜µ

### 3.1 æ ¸å¿ƒæ¦‚å¿µå…³ç³»

| æ¦‚å¿µA | å…³ç³» | æ¦‚å¿µB | å¼ºåº¦ | è¯´æ˜ |
|-------|------|-------|------|------|
| **Tracer** | åˆ›å»º | **Span** | â­â­â­â­â­ | Traceråˆ›å»ºSpan |
| **Span** | åŒ…å« | **Attributes** | â­â­â­â­â­ | SpanåŒ…å«å±æ€§ |
| **Span** | å¼•ç”¨ | **SemanticConventions** | â­â­â­â­ | Spanéµå¾ªè¯­ä¹‰çº¦å®š |
| **Metrics** | èšåˆ | **DataPoints** | â­â­â­â­â­ | Metricsèšåˆæ•°æ®ç‚¹ |
| **Exporter** | ä½¿ç”¨ | **Compression** | â­â­â­ | Exporterå¯é€‰å‹ç¼© |
| **Client** | ä¾èµ– | **Transport** | â­â­â­â­â­ | Clientä¾èµ–ä¼ è¾“å±‚ |
| **Batch** | ä¼˜åŒ– | **Throughput** | â­â­â­â­ | æ‰¹å¤„ç†æå‡åå |
| **SIMD** | åŠ é€Ÿ | **Serialization** | â­â­â­â­ | SIMDåŠ é€Ÿåºåˆ—åŒ– |

### 3.2 APIä¾èµ–å…³ç³»

```
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
APIä¾èµ–å±‚æ¬¡
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
é«˜å±‚API                ä¾èµ–        ä½å±‚API
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
send_traces()          â†’          batch_spans()
batch_spans()          â†’          compress_gzip()
compress_gzip()        â†’          simd_compress()
create_span()          â†’          semantic_attributes()
record_metric()        â†’          aggregation()
emit_log()             â†’          serialize()
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
```

---

## 4. å±‚æ¬¡ç»“æ„

### 4.1 APIæŠ½è±¡å±‚æ¬¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          åº”ç”¨å±‚ API                       â”‚
â”‚  (User-facing, High-level)              â”‚
â”‚                                          â”‚
â”‚  Tracer, Meter, Logger                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          æ ¸å¿ƒå±‚ API                       â”‚
â”‚  (Core Functionality)                    â”‚
â”‚                                          â”‚
â”‚  Span, Metric, Log, Attributes          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          å¤„ç†å±‚ API                       â”‚
â”‚  (Processing)                            â”‚
â”‚                                          â”‚
â”‚  Batch, Compress, Serialize             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          ä¼ è¾“å±‚ API                       â”‚
â”‚  (Transport)                             â”‚
â”‚                                          â”‚
â”‚  gRPC, HTTP, TLS                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          ä¼˜åŒ–å±‚ API                       â”‚
â”‚  (Optimization)                          â”‚
â”‚                                          â”‚
â”‚  SIMD, Memory Pool, Zero-copy           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.2 APIå¤æ‚åº¦åˆ†çº§

| çº§åˆ« | APIç±»å‹ | ç¤ºä¾‹ | ä½¿ç”¨é¢‘ç‡ | å­¦ä¹ éš¾åº¦ |
|------|---------|------|----------|----------|
| **L1** | åŸºç¡€API | create_span(), record_metric() | â­â­â­â­â­ | â­ |
| **L2** | ä¸­çº§API | batch_config(), compression() | â­â­â­â­ | â­â­ |
| **L3** | é«˜çº§API | custom_sampler(), propagator() | â­â­â­ | â­â­â­ |
| **L4** | ä¸“å®¶API | simd_optimize(), profiling() | â­â­ | â­â­â­â­ |
| **L5** | å†…éƒ¨API | memory_pool(), zero_copy() | â­ | â­â­â­â­â­ |

---

## 5. ä½¿ç”¨åœºæ™¯æ˜ å°„

### 5.1 åœºæ™¯åˆ°APIæ˜ å°„

| åœºæ™¯ | ä¸»è¦API | æ¬¡è¦API | éš¾åº¦ | æ€§èƒ½ |
|------|---------|---------|------|------|
| **åŸºç¡€è¿½è¸ª** | create_span(), end_span() | add_attributes() | â­ | â­â­â­â­ |
| **æŒ‡æ ‡æ”¶é›†** | record_counter(), record_gauge() | aggregation() | â­ | â­â­â­â­ |
| **æ—¥å¿—è®°å½•** | emit_log() | log_attributes() | â­ | â­â­â­â­ |
| **é«˜æ€§èƒ½è¿½è¸ª** | batch(), compress() | simd_serialize() | â­â­â­ | â­â­â­â­â­ |
| **åˆ†å¸ƒå¼è¿½è¸ª** | context_propagation() | trace_id() | â­â­â­ | â­â­â­â­ |
| **æ€§èƒ½åˆ†æ** | start_profiling() | collect_profile() | â­â­â­â­ | â­â­â­â­ |
| **è¯­ä¹‰æ ‡å‡†åŒ–** | semantic_conventions() | resource_attributes() | â­â­ | â­â­â­â­ |

### 5.2 APIè°ƒç”¨æ¨¡å¼

#### æ¨¡å¼1: ç®€å•è¿½è¸ª

```rust
let tracer = get_tracer();
let span = tracer.create_span("operation");
// ... æ“ä½œ ...
span.end();
```

**å¤æ‚åº¦**: â­  
**æ€§èƒ½**: â­â­â­â­  
**é€‚ç”¨**: 90%çš„åœºæ™¯

---

#### æ¨¡å¼2: æ‰¹å¤„ç†ä¼˜åŒ–

```rust
let batch_config = BatchConfig::new()
    .with_max_batch_size(512)
    .with_timeout(100ms);
    
let exporter = Exporter::new()
    .with_batch(batch_config)
    .with_compression(Compression::Zstd);
```

**å¤æ‚åº¦**: â­â­â­  
**æ€§èƒ½**: â­â­â­â­â­  
**é€‚ç”¨**: é«˜åååœºæ™¯

---

#### æ¨¡å¼3: SIMDåŠ é€Ÿ

```rust
let simd_config = SimdConfig::new()
    .enable_avx2()
    .with_parallel_lanes(8);
    
let serializer = Serializer::new()
    .with_simd(simd_config);
```

**å¤æ‚åº¦**: â­â­â­â­  
**æ€§èƒ½**: â­â­â­â­â­  
**é€‚ç”¨**: æ€§èƒ½å…³é”®åœºæ™¯

---

## 6. æ€§èƒ½ç‰¹å¾çŸ©é˜µ

### 6.1 APIæ€§èƒ½å¯¹æ¯”

```
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
APIæ€§èƒ½åŸºå‡†æµ‹è¯•
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
API              ååé‡     å»¶è¿ŸP99    CPUä½¿ç”¨
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
create_span()    500K/s     50Î¼s       10%
batch_spans()    2M/s       200Î¼s      15%
compress_gzip()  100MB/s    1ms        30%
compress_zstd()  300MB/s    0.5ms      25%
simd_serialize() 500MB/s    100Î¼s      20%
grpc_send()      50K/s      5ms        20%
http_send()      30K/s      10ms       15%
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
```

---

## 7. å±æ€§ç»´åº¦åˆ†æ

### 7.1 Spanå±æ€§ç±»åˆ«

**æ¦‚å¿µ**: Span Attributes

**å®šä¹‰**: Spançš„å…ƒæ•°æ®é”®å€¼å¯¹

**å†…æ¶µ**:
- æè¿°æ€§: æè¿°Spançš„ç‰¹å¾
- å¯æŸ¥è¯¢: æ”¯æŒè¿‡æ»¤å’Œèšåˆ
- ç¬¦åˆçº¦å®š: éµå¾ªè¯­ä¹‰çº¦å®š

**å¤–å»¶**:
- åŒ…å«: service.name, http.method, db.statement
- ä¸åŒ…å«: Span timingä¿¡æ¯ï¼ˆå·²æœ‰ä¸“é—¨å­—æ®µï¼‰

**å±æ€§åˆ†ç±»**:

| ç±»åˆ« | ç¤ºä¾‹ | åŸºæ•° | æŸ¥è¯¢é¢‘ç‡ |
|------|------|------|----------|
| **Service** | service.name, service.version | ä½ | â­â­â­â­â­ |
| **HTTP** | http.method, http.status_code | ä¸­ | â­â­â­â­â­ |
| **Database** | db.system, db.statement | ä¸­ | â­â­â­â­ |
| **Messaging** | messaging.system, messaging.destination | ä¸­ | â­â­â­ |
| **RPC** | rpc.service, rpc.method | ä¸­ | â­â­â­â­ |

---

## ğŸ”— ç›¸å…³èµ„æº

- [APIå¿«é€Ÿå‚è€ƒ](./API_QUICK_REFERENCE.md)
- [å¯¹æ¯”çŸ©é˜µ](./COMPARISON_MATRIX.md)
- [æ¦‚å¿µå®šä¹‰](./CONCEPTS.md)
- [API README](./README.md)

---

**ç‰ˆæœ¬**: 1.0  
**åˆ›å»ºæ—¥æœŸ**: 2025-10-28  
**æœ€åæ›´æ–°**: 2025-10-28  
**ç»´æŠ¤å›¢é˜Ÿ**: OTLP_rust APIå›¢é˜Ÿ

