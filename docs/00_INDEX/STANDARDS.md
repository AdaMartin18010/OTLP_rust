# OTLP Rust 文档编写规范完整版

**版本**: 2.0  
**生效日期**: 2025年10月26日  
**维护团队**: Documentation Team

---

## 📖 概述

本文档定义了OTLP Rust项目的完整文档编写规范，确保所有文档保持一致性、高质量和易维护性。

---

## 🎯 文档原则

### 核心原则

1. **清晰性** - 简洁明了，易于理解
2. **准确性** - 技术信息准确无误
3. **完整性** - 覆盖所有必要内容
4. **一致性** - 遵循统一标准
5. **可维护性** - 易于更新和扩展

### 单一信息源原则

- 每个概念只在一个权威文档中详细说明
- 其他文档通过链接引用，不重复内容
- 避免信息冗余和不一致

---

## 📝 Markdown格式规范

### 标题层级

```markdown
# 一级标题 (文档标题，每个文件只有一个)

## 二级标题 (主要章节)

### 三级标题 (子章节)

#### 四级标题 (详细说明)

##### 五级标题 (最小单元，谨慎使用)
```

**规则**:

- 不要跳级（例如从H2直接到H4）
- 标题后空一行再开始内容
- 标题使用句子式大小写

### 列表格式

**无序列表** - 统一使用 `-`：

```markdown
- 第一项
- 第二项
  - 嵌套项
  - 嵌套项
- 第三项
```

**有序列表**：

```markdown
1. 第一步
2. 第二步
3. 第三步
```

**任务列表**：

```markdown
- [ ] 待完成任务
- [x] 已完成任务
```

### 代码块

**始终指定语言**：

```markdown
\`\`\`rust
fn main() {
    println!("Hello, OTLP!");
}
\`\`\`
```

**支持的语言标签**:

- `rust` - Rust代码
- `toml` - 配置文件
- `bash` / `sh` - Shell脚本
- `text` - 纯文本输出
- `json` - JSON数据
- `yaml` - YAML配置
- `markdown` - Markdown示例

**行内代码**：

```markdown
使用 `OtlpClient` 创建客户端实例。
```

### 链接格式

**内部链接**（相对路径）：

```markdown
查看 [API参考](API_REFERENCE.md) 了解详情。
查看 [快速开始](01_快速开始/README.md) 目录。
```

**外部链接**（使用尖括号）：

```markdown
- OpenTelemetry官网: <https://opentelemetry.io/>
- Rust官网: <https://www.rust-lang.org/>
```

**锚点链接**：

```markdown
跳转到 [配置章节](#配置)
```

### 表格格式

```markdown
| 列标题1 | 列标题2 | 列标题3 |
|---------|---------|---------|
| 内容1   | 内容2   | 内容3   |
| 内容4   | 内容5   | 内容6   |
```

**对齐规则**:

- 表头使用管道符对齐
- 使用连字符分隔表头和内容
- 保持列宽一致以提高可读性

### 强调格式

- **加粗** - 使用 `**文本**`
- *斜体* - 使用 `*文本*`
- ***加粗斜体*** - 使用 `***文本***`
- `代码` - 使用反引号

### 引用格式

```markdown
> 这是一段引用文本。
> 可以跨多行。
```

### 水平分隔线

```markdown
---
```

使用三个连字符，前后空一行。

---

## 📂 文档结构规范

### 标准文档头部

```markdown
# 文档标题

**版本**: 1.0  
**最后更新**: 2025-10-26  
**状态**: 🟢 活跃维护

> **简短描述**: 一句话说明文档用途

---

## 内容开始...
```

### README.md结构

```markdown
# 项目/模块名称

简短的项目描述。

## 快速开始

3-5步的快速开始指南。

## 主要特性

- 特性1
- 特性2
- 特性3

## 文档导航

指向其他重要文档的链接。

## 许可证

许可证信息。
```

### API文档结构

```markdown
# API参考

## 模块名称

### 函数/结构体名称

**签名**:
\`\`\`rust
pub fn function_name(param: Type) -> ReturnType
\`\`\`

**描述**: 功能说明

**参数**:
- `param` - 参数说明

**返回值**: 返回值说明

**示例**:
\`\`\`rust
// 使用示例
\`\`\`

**错误**: 可能的错误情况
```

### 指南文档结构

```markdown
# 指南标题

## 概述

简要说明指南目的和适用范围。

## 前提条件

列出必要的前置知识或环境。

## 步骤

### 步骤1: 标题

详细说明和代码示例。

### 步骤2: 标题

详细说明和代码示例。

## 最佳实践

相关建议和注意事项。

## 故障排查

常见问题和解决方案。

## 下一步

推荐的后续学习内容。
```

---

## 📛 命名规范

### 文件命名

**英文文档** - 使用UPPER_SNAKE_CASE：

```text
API_REFERENCE.md
QUICK_START_GUIDE.md
DEPLOYMENT_GUIDE.md
```

**中文文档** - 使用中文+下划线：

```text
快速开始指南.md
API参考文档.md
```

**目录命名** - 使用数字前缀+描述：

```text
01_快速开始/
02_核心概念/
03_标准规范/
```

### 标题命名

- 清晰描述内容
- 避免过长（<50字符）
- 使用动词开头（对于操作指南）
- 使用名词短语（对于概念文档）

---

## 💻 代码示例规范

### 示例完整性

**好的示例**：

```rust
use otlp::client::{OtlpClient, OtlpClientBuilder};
use anyhow::Result;

#[tokio::main]
async fn main() -> Result<()> {
    // 创建客户端
    let client = OtlpClientBuilder::new()
        .endpoint("http://localhost:4317")
        .build()
        .await?;
    
    // 发送数据
    client.send_telemetry_data(data).await?;
    
    Ok(())
}
```

**原则**:

- 包含必要的imports
- 展示完整的函数签名
- 包含错误处理
- 添加注释说明关键步骤

### 示例组织

```markdown
### 基础示例

最简单的使用方式。

### 高级示例

复杂场景的实现。

### 完整示例

生产就绪的代码。
```

---

## 🌍 多语言文档规范

### 双语支持策略

1. **核心文档** - 提供中英文版本
   - 英文为主文档
   - 中文为翻译版本

2. **命名约定**:
   - 英文: `DOCUMENT_NAME.md`
   - 中文: `DOCUMENT_NAME_zh.md` 或独立中文文件

3. **同步更新**:
   - 英文文档更新后，及时更新中文版本
   - 在文档头部注明最后同步时间

### 术语一致性

维护 `Glossary.md` 确保术语翻译一致：

| 英文 | 中文 | 说明 |
|------|------|------|
| Telemetry | 遥测 | 不翻译为"遥感" |
| Trace | 追踪 | 不翻译为"痕迹" |
| Span | 跨度 | 保持一致 |

---

## ✅ 质量检查清单

### 提交前检查

- [ ] 标题层级正确，无跳级
- [ ] 所有代码块指定语言标签
- [ ] 列表格式统一使用 `-`
- [ ] 内部链接使用相对路径
- [ ] 外部链接使用尖括号
- [ ] 表格格式正确对齐
- [ ] 包含文档头部信息
- [ ] 代码示例完整可用
- [ ] 无拼写错误
- [ ] 无TODO标记遗留

### 审查要点

- [ ] 内容准确无误
- [ ] 逻辑清晰连贯
- [ ] 示例代码可运行
- [ ] 链接全部有效
- [ ] 图片正常显示
- [ ] 格式符合规范

---

## 🔧 维护工具

### 自动化检查

使用以下工具辅助检查：

```bash
# 格式检查
./scripts/doc_maintenance/format_check.sh

# 链接验证
./scripts/doc_maintenance/link_validator.sh

# TODO扫描
./scripts/doc_maintenance/todo_scanner.sh
```

### 手动审查

定期审查清单：

- 月度：检查链接有效性
- 季度：更新过时内容
- 年度：全面文档审计

---

## 📚 文档模板

### 模板位置

`docs/templates/` 目录包含：

- `README_TEMPLATE.md`
- `GUIDE_TEMPLATE.md`
- `API_REFERENCE_TEMPLATE.md`
- `CHANGELOG_TEMPLATE.md`

### 使用方法

1. 复制相应模板
2. 根据需要填充内容
3. 遵循本规范格式
4. 提交前完整检查

---

## 🎯 特殊文档类型

### CHANGELOG.md

```markdown
# Changelog

## [版本号] - YYYY-MM-DD

### Added
- 新增功能

### Changed
- 变更内容

### Fixed
- 修复问题

### Removed
- 移除内容
```

### 主索引 (00_MASTER_INDEX.md)

- 提供完整的文档导航
- 按角色组织（用户/开发者/运维）
- 按主题分类
- 包含文档状态指示

---

## 📞 获取帮助

### 文档问题

- 查看本规范
- 参考现有文档示例
- 咨询文档维护团队

### 规范更新

本规范持续改进，欢迎提出建议：

1. 提交Issue说明问题
2. 提供改进建议
3. 参与讨论

---

## 📊 规范遵循度评分

### 评分标准

- **优秀** (90-100分): 完全符合规范
- **良好** (80-89分): 基本符合，少量偏差
- **合格** (70-79分): 符合主要规范
- **需改进** (<70分): 存在明显问题

### 评分维度

| 维度 | 权重 | 说明 |
|------|------|------|
| 格式规范 | 30% | Markdown格式 |
| 结构完整 | 25% | 文档结构 |
| 内容质量 | 25% | 准确性和清晰度 |
| 代码示例 | 15% | 示例质量 |
| 可维护性 | 5% | 易于更新 |

---

## 🔄 规范版本历史

### v2.0 (2025-10-26)

- 完整重写，基于Phase 1-3清理成果
- 新增多语言文档规范
- 新增质量检查清单
- 新增评分标准

### v1.0 (2025-10-17)

- 初始版本
- 基本格式规范

---

**规范维护**: Documentation Team  
**最后更新**: 2025-10-26  
**下次审查**: 2026-01-26

**遵循此规范，创造优秀文档！** 📚✨
