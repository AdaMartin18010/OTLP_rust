# 📦 Crates 使用指南

**版本**: 2.0  
**最后更新**: 2025年10月26日  
**状态**: 🟢 活跃维护

> **简介**: 四个 crate 分层架构使用指南 - libraries、model、reliability、otlp 的完整文档和学习路径。

---

## 📋 目录

- [📦 Crates 使用指南](#-crates-使用指南)
  - [📋 目录](#-目录)
  - [🎯 快速导航](#-快速导航)
    - [🏗️ 架构文档](#️-架构文档)
    - [📚 Crate 使用指南](#-crate-使用指南)
  - [🏗️ 项目架构概览](#️-项目架构概览)
  - [📚 Crate 详细说明](#-crate-详细说明)
    - [1. libraries 📚 - 成熟库集成](#1-libraries---成熟库集成)
    - [2. model 🎨 - 设计模型体系](#2-model---设计模型体系)
    - [3. reliability ⚡ - 运行时基础设施](#3-reliability---运行时基础设施)
    - [4. otlp 📊 - 可观测性协议](#4-otlp---可观测性协议)
  - [🔄 Crate 之间的关系](#-crate-之间的关系)
  - [🗺️ 学习路径](#️-学习路径)
    - [初学者路径](#初学者路径)
    - [开发者路径](#开发者路径)
    - [架构师路径](#架构师路径)
  - [💡 使用建议](#-使用建议)
  - [📊 对比矩阵](#-对比矩阵)
  - [📚 相关文档](#-相关文档)

---

## 🎯 快速导航

### 🏗️ 架构文档

| 文档 | 说明 | 规模 |
|------|------|------|
| [架构重组计划](../CRATES_ARCHITECTURE_REORG_2025_10_26.md) | 四crate定位、代码组织、实施计划 | 10,000+ 字 |
| [知识图谱](../CRATES_KNOWLEDGE_GRAPH_2025_10_26.md) | 概念定义、属性、关系、扩展路径 | 15,000+ 字 |
| [矩阵对比](../CRATES_MATRIX_COMPARISON_2025_10_26.md) | 10维度对比、学习路径、决策支持 | 12,000+ 字 |
| [工作总结](../CRATES_REORGANIZATION_SUMMARY_2025_10_26.md) | 重组工作完成情况和下一步计划 | 5,000+ 字 |

### 📚 Crate 使用指南

| Crate | 使用指南 | 定位 | 文档 |
|-------|---------|------|------|
| **libraries** | [使用指南](libraries_guide.md) ⭐ NEW | 成熟库集成 📚 | [完整文档](../../crates/libraries/docs/README.md) |
| **model** | [使用指南](model_guide.md) ⭐ NEW | 设计模型体系 🎨 | [完整文档](../../crates/model/docs/README.md) |
| **reliability** | [使用指南](reliability_guide.md) ⭐ NEW | 运行时基础设施 ⚡ | [完整文档](../../crates/reliability/docs/README.md) |
| **otlp** | [使用指南](otlp_guide.md) ⭐ NEW | 可观测性协议 📊 | [完整文档](../../crates/otlp/docs/README.md) |

---

## 🏗️ 项目架构概览

```text
┌─────────────────────────────────────────────────────────────┐
│                     OTLP_rust 项目                          │
│                    四Crate分层架构                           │
└─────────────────────────────────────────────────────────────┘

┌───────────────────────────────────────────────────────────┐
│  1. libraries 📚 - 成熟库集成层                           │
│  ┌─────────────┬─────────────┬─────────────┬───────────┐ │
│  │ 数据库集成   │ 缓存系统     │ 消息队列    │ HTTP框架   │ │
│  │ PostgreSQL  │ Redis       │ Kafka       │ Axum      │ │
│  │ MySQL       │ Moka        │ NATS        │ Actix-web │ │
│  │ SQLite      │ DashMap     │ MQTT        │ Reqwest   │ │
│  └─────────────┴─────────────┴─────────────┴───────────┘ │
└───────────────────────────────────────────────────────────┘
                            ↓ 提供基础能力
┌───────────────────────────────────────────────────────────┐
│  2. model 🎨 - 设计模型体系层                             │
│  ┌─────────────┬─────────────┬─────────────┬───────────┐ │
│  │ 形式化模型  │ 架构模型    │ 设计模式    │ 并发模型  │ │
│  │ 操作语义    │ 分层架构    │ Builder     │ Actor     │ │
│  │ 指称语义    │ 六边形架构  │ Factory     │ CSP       │ │
│  │ 时序逻辑    │ 微服务架构  │ Observer    │ STM       │ │
│  └─────────────┴─────────────┴─────────────┴───────────┘ │
└───────────────────────────────────────────────────────────┘
                            ↓ 提供设计指导
┌───────────────────────────────────────────────────────────┐
│  3. reliability ⚡ - 运行时基础设施层                      │
│  ┌─────────────┬─────────────┬─────────────┬───────────┐  │
│  │ 执行流感知   │ 运行时环境   │ 性能度量     │ 容错机制  │  │
│  │ 调用链追踪   │ OS环境      │ CPU度量      │ 熔断器    │  │
│  │ 执行图       │ 容器/K8s    │ 内存度量     │ 重试      │  │
│  │ 性能分析     │ 嵌入式/Wasm │ I/O度量      │ 限流      │  │
│  └─────────────┴─────────────┴─────────────┴───────────┘  │
└───────────────────────────────────────────────────────────┘
                            ↓ 提供运行时支持
┌───────────────────────────────────────────────────────────┐
│  4. otlp 📊 - 可观测性协议层                               │
│  ┌─────────────┬─────────────┬─────────────┬───────────┐  │
│  │ OTLP信号     │ 传输协议    │ 性能优化     │ 语义约定   │  │
│  │ Trace       │ gRPC        │ SIMD        │ HTTP      │  │
│  │ Metric      │ HTTP/JSON   │ 内存池       │ Database  │  │
│  │ Log         │ HTTP/Proto  │ 连接池       │ Messaging │  │
│  │ Profile     │ OpAMP       │ Tracezip    │ K8s       │  │
│  └─────────────┴─────────────┴─────────────┴───────────┘  │
└───────────────────────────────────────────────────────────┘
```

---

## 📦 Crate 详细介绍

### 1. libraries 📚 - 成熟库集成

**定位**: Rust生态成熟的常用开源库的介绍、封装和示例

**核心功能**:

- 🗄️ **数据库集成**: PostgreSQL, MySQL, SQLite, Redis, MongoDB
- ⚡ **缓存系统**: Redis, Moka, DashMap
- 📨 **消息队列**: Kafka, NATS, MQTT, RabbitMQ
- 🌐 **HTTP框架**: Axum, Actix-web, Reqwest
- ⏱️ **运行时**: Tokio, async-std, Glommio

**使用场景**:

- Web应用开发
- 微服务架构
- 数据密集型应用
- 实时消息系统

**📖 详细文档**: [libraries 使用指南](libraries_guide.md)

---

### 2. model 🎨 - 设计模型体系

**定位**: Rust各领域的设计模型、形式模型、架构模型、软件模型

**核心功能**:

- 🔬 **形式化模型**: 操作语义, 指称语义, 时序逻辑
- 🏛️ **架构模型**: 分层架构, 六边形架构, 微服务架构
- 🎨 **设计模式**: Builder, Factory, Observer, Strategy
- 🔄 **并发模型**: Actor, CSP, STM, Fork-Join
- 🌐 **分布式模型**: Raft, Paxos, 一致性哈希, 分布式事务

**使用场景**:

- 系统架构设计
- 分布式系统建模
- 并发编程
- 形式化验证

**📖 详细文档**: [model 使用指南](model_guide.md)

---

### 3. reliability ⚡ - 运行时基础设施

**定位**: Rust的运行、执行流、环境OS感知、度量的封装和组织

**核心功能**:

- 🔍 **执行流感知**: 调用链追踪, 执行图, 性能分析
- 🖥️ **运行时环境**: OS环境, 容器, K8s, 嵌入式, Wasm
- 📊 **性能度量**: CPU, 内存, I/O, 网络度量
- 🎯 **自适应优化**: 资源预测, 自动调优, 拓扑发现
- 🛡️ **容错机制**: 熔断器, 重试, 超时, 限流

**使用场景**:

- 高可用系统
- 性能监控
- 自适应系统
- 故障恢复

**📖 详细文档**: [reliability 使用指南](reliability_guide.md)

---

### 4. otlp 📊 - 可观测性协议

**定位**: Rust的OTLP全面梳理、通用封装和惯用法

**核心功能**:

- 📡 **OTLP信号**: Trace, Metric, Log, Profile, Event
- 🚀 **传输协议**: gRPC, HTTP/JSON, HTTP/Protobuf
- ⚡ **性能优化**: SIMD, 内存池, 连接池, 零拷贝
- 📝 **语义约定**: HTTP, Database, Messaging, Kubernetes
- 🔧 **高级特性**: Profiling API, Tracezip压缩, OpAMP

**使用场景**:

- 分布式追踪
- 应用监控
- 性能分析
- 日志聚合

**📖 详细文档**: [otlp 使用指南](otlp_guide.md)

---

## 🎯 学习路径

### 🔰 初学者路径 (1-2周)

1. **第1天**: 阅读 [架构重组计划](../CRATES_ARCHITECTURE_REORG_2025_10_26.md)，理解整体架构
2. **第2-3天**: 学习 [libraries 使用指南](libraries_guide.md)，掌握基础库
3. **第4-5天**: 学习 [otlp 使用指南](otlp_guide.md)，了解可观测性
4. **第6-7天**: 实践基础示例，构建简单应用
5. **第2周**: 深入学习感兴趣的 crate

### 💻 开发者路径 (2-4周)

1. **第1周**: 完成初学者路径
2. **第2周**: 学习 [model 使用指南](model_guide.md)，理解设计模式
3. **第3周**: 学习 [reliability 使用指南](reliability_guide.md)，掌握容错机制
4. **第4周**: 综合实践，构建生产级应用

### 🏗️ 架构师路径 (4-8周)

1. **第1-2周**: 完成开发者路径
2. **第3-4周**: 深入学习 [知识图谱](../CRATES_KNOWLEDGE_GRAPH_2025_10_26.md)，理解概念关系
3. **第5-6周**: 研究 [矩阵对比](../CRATES_MATRIX_COMPARISON_2025_10_26.md)，掌握技术选型
4. **第7-8周**: 设计复杂系统架构，应用所学知识

---

## 🔗 相关资源

### 📚 核心文档

- [项目主文档](../README.md)
- [文档导航指南](../DOCUMENTATION_GUIDE.md)
- [完整文档索引](../INDEX.md)

### 🎯 快速开始

- [快速入门](../01_GETTING_STARTED/README.md)
- [安装指南](../guides/installation.md)
- [基础示例](../examples/basic-examples.md)

### 🔧 API 参考

- [完整 API 文档](../03_API_REFERENCE/README.md)
- [API 快速参考](../03_API_REFERENCE/API_QUICK_REFERENCE.md)

### 📖 参考资料

- [OTLP 标准对齐](../08_REFERENCE/otlp_standards_alignment.md)
- [Rust 1.90 技术栈](../08_REFERENCE/rust_1.90_otlp_tech_stack_alignment.md)
- [最佳实践](../08_REFERENCE/best_practices.md)

---

## 💡 使用建议

### 按使用场景选择 Crate

#### 📊 构建可观测性系统

```text
主要使用: otlp
辅助使用: reliability (性能度量)
参考学习: model (分布式模型)
```

#### 🌐 构建 Web 应用

```text
主要使用: libraries (HTTP框架, 数据库)
辅助使用: reliability (容错机制)
参考学习: model (架构模式)
```

#### 🔄 构建分布式系统

```text
主要使用: model (分布式模型)
辅助使用: reliability (执行流感知), otlp (分布式追踪)
参考学习: libraries (消息队列)
```

#### ⚡ 构建高性能系统

```text
主要使用: reliability (性能度量, 自适应优化)
辅助使用: libraries (运行时), otlp (性能优化)
参考学习: model (并发模型)
```

---

## 🤝 贡献指南

欢迎为 Crates 文档和实现做出贡献！

1. **改进文档**: 完善使用指南和示例
2. **添加示例**: 提供更多实用示例
3. **报告问题**: 反馈使用中的问题
4. **提出建议**: 改进 crate 设计和实现

详见: [贡献指南](../guides/CONTRIBUTING.md)

---

**最后更新**: 2025年10月26日  
**文档版本**: v1.0.0  
**维护状态**: 🔄 持续维护中
