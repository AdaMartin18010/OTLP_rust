# Pull Request Checklist

使用此清单确保PR质量。在提交PR前，请确保所有相关项都已完成。

---

## 📋 基础检查

### 代码质量

- [ ] **代码遵循Rust惯例** - 使用标准的Rust编码风格
- [ ] **遵循项目约定** - 符合项目特定的代码规范
- [ ] **命名清晰** - 变量、函数、类型命名有意义
- [ ] **无不必要的复杂性** - 代码简洁明了
- [ ] **无死代码** - 移除未使用的代码
- [ ] **无Debug代码** - 移除调试用的print语句等

### 错误处理

- [ ] **错误处理完善** - 所有可能的错误都被适当处理
- [ ] **使用Result/Option** - 适当使用Rust的错误处理机制
- [ ] **错误信息清晰** - 错误消息帮助用户理解问题
- [ ] **无panic** - 避免不必要的panic（除非确实应该panic）
- [ ] **边界情况考虑** - 处理了所有边界情况

### 安全性

- [ ] **最小化unsafe** - 只在必要时使用unsafe
- [ ] **unsafe有文档** - 所有unsafe代码都有安全性说明
- [ ] **无数据竞争** - 并发代码是安全的
- [ ] **输入验证** - 验证所有外部输入
- [ ] **无安全漏洞** - cargo audit通过

---

## 📝 文档

### 代码文档

- [ ] **Public API有文档** - 所有公共API都有文档注释
- [ ] **复杂逻辑有注释** - 复杂算法或逻辑有解释
- [ ] **示例代码** - 重要功能有使用示例
- [ ] **文档准确** - 文档与代码实现一致
- [ ] **链接有效** - 文档中的链接都可访问

### 项目文档

- [ ] **README更新** - 如有必要更新README
- [ ] **CHANGELOG更新** - 添加到CHANGELOG
- [ ] **API变更文档化** - Breaking changes有说明
- [ ] **迁移指南** - 重大变更有迁移指南

---

## 🧪 测试

### 单元测试

- [ ] **新功能有测试** - 所有新功能都有单元测试
- [ ] **测试覆盖完整** - 测试覆盖主要代码路径
- [ ] **边界情况测试** - 测试边界条件和异常情况
- [ ] **测试通过** - 所有测试都通过
- [ ] **测试独立** - 测试之间相互独立

### 集成测试

- [ ] **关键路径有集成测试** - 重要功能有端到端测试
- [ ] **API兼容性测试** - 测试API的向后兼容性
- [ ] **错误场景测试** - 测试错误处理

### 性能测试

- [ ] **性能敏感代码有benchmark** - 关键性能路径有基准测试
- [ ] **性能无退化** - 性能相比baseline无明显下降
- [ ] **基准测试通过** - benchmark编译并运行成功

---

## 🔧 CI/CD

### 自动化检查

- [ ] **格式检查通过** - `cargo fmt --check`
- [ ] **Lint检查通过** - `cargo clippy -- -D warnings`
- [ ] **编译检查通过** - `cargo check --all-targets`
- [ ] **测试通过** - `cargo test` 或 `cargo nextest run`
- [ ] **文档生成成功** - `cargo doc`
- [ ] **所有CI检查通过** - GitHub Actions全绿

### 代码覆盖率

- [ ] **覆盖率不降低** - 测试覆盖率维持或提高
- [ ] **新代码有测试** - 新增代码有适当测试覆盖

---

## 📊 性能

### 性能考虑

- [ ] **无性能退化** - 基准测试显示无明显性能下降
- [ ] **资源使用合理** - 内存和CPU使用在可接受范围
- [ ] **优化关键路径** - 热点代码已优化
- [ ] **避免不必要分配** - 减少堆分配
- [ ] **批处理优化** - 批量操作已优化

---

## 🔄 Git

### 提交历史

- [ ] **提交信息清晰** - 每个commit都有清晰的说明
- [ ] **原子提交** - 每个commit是一个逻辑单元
- [ ] **无merge commits** - 使用rebase保持历史线性
- [ ] **无debug commits** - 移除调试用的临时commits

### 分支管理

- [ ] **基于最新main** - 从最新的main分支创建
- [ ] **无冲突** - 解决了所有merge冲突
- [ ] **分支命名规范** - 遵循分支命名约定

---

## 👥 审查

### PR描述

- [ ] **标题清晰** - PR标题简明扼要
- [ ] **描述完整** - 说明了改动的内容和原因
- [ ] **关联Issue** - 链接到相关的Issue
- [ ] **截图/录屏** - UI变更有视觉说明
- [ ] **Breaking changes标注** - 明确标识Breaking changes

### 代码审查

- [ ] **自我审查** - 提交前自己review一遍
- [ ] **小PR优先** - 尽量保持PR小而聚焦
- [ ] **响应及时** - 及时回复审查意见
- [ ] **讨论记录** - 重要讨论在PR中记录

---

## ✅ 最终检查

在提交PR前，确认：

- [ ] **本地测试通过** - 在本地运行所有检查
- [ ] **文档齐全** - 所有必要文档都已完成
- [ ] **CI准备就绪** - PR描述完整，标签正确
- [ ] **准备好审查** - 代码已准备好接受审查

---

## 📌 特殊情况

### 对于Draft PR

如果这是一个Draft PR（工作进行中）：

- [ ] **标记为Draft** - 在GitHub上标记为Draft
- [ ] **说明进度** - 在描述中说明当前状态
- [ ] **列出TODO** - 清单列出待完成项

### 对于Hotfix

如果这是紧急修复：

- [ ] **标记为Hotfix** - 添加hotfix标签
- [ ] **说明严重性** - 解释问题的严重程度
- [ ] **最小化改动** - 只包含必要的修复

### 对于Breaking Changes

如果包含Breaking changes：

- [ ] **清晰标识** - 在标题和描述中标识
- [ ] **迁移指南** - 提供升级指导
- [ ] **版本号调整** - 确认版本号需要major bump

---

## 💡 提示

- **小而频繁的PR** 比大而复杂的PR更容易审查
- **一次只做一件事** - 每个PR应该聚焦单一目标
- **积极响应反馈** - 将审查意见视为学习机会
- **使用检查清单** - 养成使用清单的习惯

---

**使用方法**:

1. 复制此清单到PR描述中
2. 逐项检查并标记完成
3. 所有必需项完成后再请求审查

**示例PR描述**:

```markdown
## 描述

此PR实现了XXX功能...

## Checklist

- [x] 代码遵循Rust惯例
- [x] 添加了单元测试
- [x] 更新了文档
- [x] 所有CI检查通过
...

## 相关Issue

Closes #123
```

---

**Happy coding! 🚀**

