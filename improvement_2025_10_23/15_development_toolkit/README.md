# å¼€å‘å·¥å…·åŒ… (Development Toolkit)

**ğŸ“… åˆ›å»ºæ—¥æœŸ**: 2025å¹´10æœˆ23æ—¥  
**ğŸ¯ ç›®æ ‡**: æä¾›ç«‹å³å¯ç”¨çš„å¼€å‘å·¥å…·å’Œè„šæœ¬  
**ğŸ“Š ç”¨é€”**: åŠ é€Ÿå¼€å‘ï¼Œæ ‡å‡†åŒ–æµç¨‹  

---

## ğŸ“‹ å·¥å…·åŒ…æ¦‚è§ˆ

æœ¬ç›®å½•åŒ…å«å¼€å‘è¿‡ç¨‹ä¸­éœ€è¦çš„å„ç§å·¥å…·ã€è„šæœ¬å’Œé…ç½®æ–‡ä»¶ï¼Œè®©å¼€å‘è€…èƒ½å¤Ÿå¿«é€Ÿæ­å»ºç¯å¢ƒå¹¶å¼€å§‹å·¥ä½œã€‚

```yaml
å·¥å…·åˆ†ç±»:
  ç¯å¢ƒæ­å»º: è‡ªåŠ¨åŒ–ç¯å¢ƒé…ç½®è„šæœ¬
  ä»£ç ç”Ÿæˆ: æ¨¡æ¿å’Œç”Ÿæˆå™¨
  å¼€å‘è¾…åŠ©: å¸¸ç”¨å‘½ä»¤å’Œå·¥å…·
  è´¨é‡ä¿è¯: æµ‹è¯•å’Œå®¡æŸ¥å·¥å…·
  CI/CD: è‡ªåŠ¨åŒ–æµæ°´çº¿é…ç½®
```

---

## ğŸ—‚ï¸ ç›®å½•ç»“æ„

```text
15_development_toolkit/
â”œâ”€â”€ README.md                           # æœ¬æ–‡æ¡£
â”œâ”€â”€ scripts/                            # è„šæœ¬å·¥å…·
â”‚   â”œâ”€â”€ setup_dev_env.sh               # å¼€å‘ç¯å¢ƒæ­å»ºè„šæœ¬
â”‚   â”œâ”€â”€ create_module.sh               # æ–°æ¨¡å—åˆ›å»ºè„šæœ¬
â”‚   â”œâ”€â”€ run_checks.sh                  # ä»£ç è´¨é‡æ£€æŸ¥è„šæœ¬
â”‚   â””â”€â”€ benchmark.sh                   # æ€§èƒ½åŸºå‡†æµ‹è¯•è„šæœ¬
â”œâ”€â”€ templates/                          # ä»£ç æ¨¡æ¿
â”‚   â”œâ”€â”€ module_template.rs             # æ¨¡å—æ¨¡æ¿
â”‚   â”œâ”€â”€ test_template.rs               # æµ‹è¯•æ¨¡æ¿
â”‚   â””â”€â”€ benchmark_template.rs          # åŸºå‡†æµ‹è¯•æ¨¡æ¿
â”œâ”€â”€ configs/                            # é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ .github/                       # GitHubé…ç½®
â”‚   â”‚   â””â”€â”€ workflows/                 # GitHub Actions
â”‚   â”‚       â”œâ”€â”€ rust_ci.yml           # Rust CIæµæ°´çº¿
â”‚   â”‚       â”œâ”€â”€ benchmark.yml         # æ€§èƒ½æµ‹è¯•
â”‚   â”‚       â””â”€â”€ release.yml           # å‘å¸ƒæµç¨‹
â”‚   â”œâ”€â”€ clippy.toml                    # Clippyé…ç½®
â”‚   â”œâ”€â”€ rustfmt.toml                   # Rustfmté…ç½®
â”‚   â””â”€â”€ tarpaulin.toml                 # ä»£ç è¦†ç›–ç‡é…ç½®
â”œâ”€â”€ checklists/                         # æ£€æŸ¥æ¸…å•
â”‚   â”œâ”€â”€ pr_checklist.md                # PRå®¡æŸ¥æ¸…å•
â”‚   â”œâ”€â”€ release_checklist.md           # å‘å¸ƒæ¸…å•
â”‚   â””â”€â”€ security_checklist.md          # å®‰å…¨æ£€æŸ¥æ¸…å•
â””â”€â”€ tools/                              # è¾…åŠ©å·¥å…·
    â”œâ”€â”€ code_generator/                # ä»£ç ç”Ÿæˆå™¨
    â””â”€â”€ perf_analyzer/                 # æ€§èƒ½åˆ†æå™¨
```

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒæ­å»ºï¼ˆ5åˆ†é’Ÿï¼‰

```bash
# å…‹éš†ä»“åº“
git clone <repo-url>
cd OTLP_rust

# è¿è¡Œç¯å¢ƒæ­å»ºè„šæœ¬
./improvement_2025_10_23/15_development_toolkit/scripts/setup_dev_env.sh

# éªŒè¯ç¯å¢ƒ
cargo --version
cargo clippy --version
cargo nextest --version
```

### 2. åˆ›å»ºæ–°æ¨¡å—

```bash
# ä½¿ç”¨æ¨¡å—ç”Ÿæˆè„šæœ¬
./improvement_2025_10_23/15_development_toolkit/scripts/create_module.sh profiling types

# è¿™å°†åˆ›å»ºï¼š
# - src/profiling/types.rsï¼ˆåŸºäºæ¨¡æ¿ï¼‰
# - tests/profiling/types_tests.rsï¼ˆæµ‹è¯•æ–‡ä»¶ï¼‰
# - benches/profiling/types_bench.rsï¼ˆåŸºå‡†æµ‹è¯•ï¼‰
```

### 3. è¿è¡Œè´¨é‡æ£€æŸ¥

```bash
# è¿è¡Œæ‰€æœ‰æ£€æŸ¥
./improvement_2025_10_23/15_development_toolkit/scripts/run_checks.sh

# å•ç‹¬è¿è¡Œç‰¹å®šæ£€æŸ¥
cargo fmt --check          # æ ¼å¼æ£€æŸ¥
cargo clippy --all-targets # Lintæ£€æŸ¥
cargo test                 # å•å…ƒæµ‹è¯•
cargo nextest run          # å¿«é€Ÿæµ‹è¯•
```

---

## ğŸ“ å·¥å…·è¯¦ç»†è¯´æ˜

### ç¯å¢ƒæ­å»ºè„šæœ¬

**æ–‡ä»¶**: `scripts/setup_dev_env.sh`

**åŠŸèƒ½**:
- æ£€æŸ¥å’Œå®‰è£…Rustå·¥å…·é“¾
- å®‰è£…å¿…è¦çš„cargoå·¥å…·
- é…ç½®IDEé›†æˆ
- è®¾ç½®Git hooks

**ä½¿ç”¨**:
```bash
./scripts/setup_dev_env.sh [--minimal|--full]
```

---

### ä»£ç ç”Ÿæˆè„šæœ¬

**æ–‡ä»¶**: `scripts/create_module.sh`

**åŠŸèƒ½**:
- ä»æ¨¡æ¿åˆ›å»ºæ–°æ¨¡å—
- è‡ªåŠ¨ç”Ÿæˆæµ‹è¯•æ–‡ä»¶
- åˆ›å»ºåŸºå‡†æµ‹è¯•æ¡†æ¶
- æ›´æ–°mod.rs

**ä½¿ç”¨**:
```bash
./scripts/create_module.sh <category> <module_name>

ç¤ºä¾‹:
./scripts/create_module.sh profiling cpu
./scripts/create_module.sh semantic_conventions http
```

---

### è´¨é‡æ£€æŸ¥è„šæœ¬

**æ–‡ä»¶**: `scripts/run_checks.sh`

**åŠŸèƒ½**:
- è¿è¡Œæ‰€æœ‰ä»£ç è´¨é‡æ£€æŸ¥
- ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
- è¿è¡Œæ€§èƒ½åŸºå‡†æµ‹è¯•
- ç”Ÿæˆè´¨é‡æŠ¥å‘Š

**ä½¿ç”¨**:
```bash
./scripts/run_checks.sh [--quick|--full|--ci]

é€‰é¡¹:
  --quick  å¿«é€Ÿæ£€æŸ¥ï¼ˆæ ¼å¼+ç¼–è¯‘ï¼‰
  --full   å®Œæ•´æ£€æŸ¥ï¼ˆåŒ…å«æµ‹è¯•å’ŒåŸºå‡†ï¼‰
  --ci     CIæ¨¡å¼ï¼ˆç”ŸæˆæŠ¥å‘Šï¼‰
```

---

## âš™ï¸ CI/CDé…ç½®

### GitHub Actionså·¥ä½œæµ

#### 1. Rust CIæµæ°´çº¿

**æ–‡ä»¶**: `configs/.github/workflows/rust_ci.yml`

**è§¦å‘æ¡ä»¶**:
- Pushåˆ°mainåˆ†æ”¯
- Pull Request

**æ­¥éª¤**:
```yaml
1. ä»£ç æ£€å‡º
2. Rustå·¥å…·é“¾è®¾ç½®
3. ä¾èµ–ç¼“å­˜
4. æ ¼å¼æ£€æŸ¥ (cargo fmt)
5. Lintæ£€æŸ¥ (cargo clippy)
6. ç¼–è¯‘æ£€æŸ¥ (cargo check)
7. å•å…ƒæµ‹è¯• (cargo test)
8. é›†æˆæµ‹è¯•
9. ä»£ç è¦†ç›–ç‡æŠ¥å‘Š
```

#### 2. æ€§èƒ½åŸºå‡†æµ‹è¯•

**æ–‡ä»¶**: `configs/.github/workflows/benchmark.yml`

**è§¦å‘æ¡ä»¶**:
- æ‰‹åŠ¨è§¦å‘
- æ¯å‘¨å®šæ—¶è¿è¡Œ

**æ­¥éª¤**:
```yaml
1. è¿è¡ŒåŸºå‡†æµ‹è¯•
2. ä¸baselineå¯¹æ¯”
3. ç”Ÿæˆæ€§èƒ½æŠ¥å‘Š
4. å‘å¸ƒåˆ°GitHub Pages
```

#### 3. å‘å¸ƒæµç¨‹

**æ–‡ä»¶**: `configs/.github/workflows/release.yml`

**è§¦å‘æ¡ä»¶**:
- åˆ›å»ºæ–°tag (v*.*.*)

**æ­¥éª¤**:
```yaml
1. å®Œæ•´æµ‹è¯•å¥—ä»¶
2. æ„å»ºreleaseäºŒè¿›åˆ¶
3. ç”ŸæˆCHANGELOG
4. åˆ›å»ºGitHub Release
5. å‘å¸ƒåˆ°crates.io
```

---

## ğŸ“‹ æ£€æŸ¥æ¸…å•

### PRå®¡æŸ¥æ¸…å•

ä½¿ç”¨æ­¤æ¸…å•ç¡®ä¿PRè´¨é‡ï¼š

```markdown
## ä»£ç è´¨é‡
- [ ] ä»£ç éµå¾ªRustæƒ¯ä¾‹å’Œé¡¹ç›®é£æ ¼
- [ ] æ‰€æœ‰public APIéƒ½æœ‰æ–‡æ¡£æ³¨é‡Š
- [ ] å¤æ‚é€»è¾‘æœ‰å†…è”æ³¨é‡Šè¯´æ˜
- [ ] æ²¡æœ‰ä¸å¿…è¦çš„unsafeä»£ç 
- [ ] é”™è¯¯å¤„ç†å®Œå–„

## æµ‹è¯•
- [ ] æ–°åŠŸèƒ½æœ‰å•å…ƒæµ‹è¯•
- [ ] æµ‹è¯•è¦†ç›–ç‡ä¸ä½äº80%
- [ ] æ‰€æœ‰æµ‹è¯•é€šè¿‡
- [ ] å…³é”®è·¯å¾„æœ‰é›†æˆæµ‹è¯•
- [ ] æ€§èƒ½æ•æ„Ÿä»£ç æœ‰åŸºå‡†æµ‹è¯•

## æ–‡æ¡£
- [ ] READMEæ›´æ–°ï¼ˆå¦‚éœ€è¦ï¼‰
- [ ] CHANGELOGæ›´æ–°
- [ ] APIæ–‡æ¡£å®Œæ•´
- [ ] ç¤ºä¾‹ä»£ç å¯è¿è¡Œ

## CI/CD
- [ ] æ‰€æœ‰CIæ£€æŸ¥é€šè¿‡
- [ ] æ²¡æœ‰æ–°çš„clippyè­¦å‘Š
- [ ] æ ¼å¼æ£€æŸ¥é€šè¿‡
- [ ] æ€§èƒ½æ— æ˜æ˜¾é€€åŒ–
```

### å‘å¸ƒæ¸…å•

**å‘å¸ƒå‰æ£€æŸ¥**:
```markdown
## ä»£ç 
- [ ] æ‰€æœ‰plannedåŠŸèƒ½å·²å®Œæˆ
- [ ] æ‰€æœ‰known bugså·²ä¿®å¤
- [ ] ä»£ç å®¡æŸ¥å®Œæˆ
- [ ] æ€§èƒ½æµ‹è¯•é€šè¿‡

## æ–‡æ¡£
- [ ] CHANGELOGå®Œæ•´
- [ ] ç‰ˆæœ¬å·æ›´æ–°
- [ ] APIæ–‡æ¡£å®¡æŸ¥
- [ ] è¿ç§»æŒ‡å—ï¼ˆå¦‚éœ€è¦ï¼‰

## æµ‹è¯•
- [ ] å®Œæ•´æµ‹è¯•å¥—ä»¶é€šè¿‡
- [ ] é›†æˆæµ‹è¯•é€šè¿‡
- [ ] æ€§èƒ½æµ‹è¯•é€šè¿‡
- [ ] æ‰‹åŠ¨æµ‹è¯•å…³é”®åŠŸèƒ½

## å‘å¸ƒ
- [ ] åˆ›å»ºreleaseåˆ†æ”¯
- [ ] æ ‡è®°ç‰ˆæœ¬å·
- [ ] æ„å»ºreleaseç‰ˆæœ¬
- [ ] å‘å¸ƒåˆ°crates.io
- [ ] GitHub Releaseåˆ›å»º
- [ ] å…¬å‘Šå‘å¸ƒ
```

---

## ğŸ”§ é…ç½®æ–‡ä»¶è¯´æ˜

### Clippyé…ç½®

**æ–‡ä»¶**: `configs/clippy.toml`

ä¸»è¦é…ç½®é¡¹ï¼š
```toml
# æœ€å¤§è®¤çŸ¥å¤æ‚åº¦
cognitive-complexity-threshold = 25

# æœ€å¤§å‡½æ•°è¡Œæ•°
too-many-lines-threshold = 150

# å…è®¸çš„lint
allow = [
    "too_many_arguments",  # æŸäº›builderéœ€è¦
]
```

### Rustfmté…ç½®

**æ–‡ä»¶**: `configs/rustfmt.toml`

ä¸»è¦é…ç½®é¡¹ï¼š
```toml
# æœ€å¤§è¡Œå®½
max_width = 100

# ç¡¬tabè¿˜æ˜¯ç©ºæ ¼
hard_tabs = false
tab_spaces = 4

# å¯¼å…¥æ’åº
imports_granularity = "Crate"
```

### ä»£ç è¦†ç›–ç‡é…ç½®

**æ–‡ä»¶**: `configs/tarpaulin.toml`

ä¸»è¦é…ç½®é¡¹ï¼š
```toml
[default]
# è¾“å‡ºæ ¼å¼
out = ["Html", "Xml"]

# è¦†ç›–ç‡é˜ˆå€¼
fail-under = 70

# æ’é™¤çš„æ–‡ä»¶
exclude-files = [
    "tests/*",
    "benches/*",
]
```

---

## ğŸ’» ä»£ç æ¨¡æ¿

### æ¨¡å—æ¨¡æ¿

**æ–‡ä»¶**: `templates/module_template.rs`

æä¾›æ ‡å‡†çš„æ¨¡å—ç»“æ„ï¼š
```rust
//! Module description
//!
//! Detailed documentation about the module

use crate::common::*;

/// Main struct for this module
#[derive(Debug, Clone)]
pub struct ModuleName {
    // Fields
}

impl ModuleName {
    /// Create a new instance
    pub fn new() -> Self {
        Self {
            // Initialize
        }
    }
}

#[cfg(test)]
mod tests {
    use super::*;

    #[test]
    fn test_basic() {
        // Test code
    }
}
```

---

## ğŸ“Š ä½¿ç”¨ç»Ÿè®¡

ä½¿ç”¨è¿™äº›å·¥å…·å¯ä»¥ï¼š

```yaml
èŠ‚çœæ—¶é—´:
  ç¯å¢ƒæ­å»º: ä»30åˆ†é’Ÿ â†’ 5åˆ†é’Ÿ
  åˆ›å»ºæ–°æ¨¡å—: ä»15åˆ†é’Ÿ â†’ 1åˆ†é’Ÿ
  è¿è¡Œæ£€æŸ¥: ä»10åˆ†é’Ÿ â†’ 2åˆ†é’Ÿ

æé«˜è´¨é‡:
  ä»£ç ä¸€è‡´æ€§: +90%
  æµ‹è¯•è¦†ç›–ç‡: +20%
  CIé€šè¿‡ç‡: +30%

æ”¹å–„ä½“éªŒ:
  æ–°äººä¸Šæ‰‹: ä»2å¤© â†’ 1å°æ—¶
  PRå®¡æŸ¥: ä»1å°æ—¶ â†’ 20åˆ†é’Ÿ
```

---

## ğŸ¤ è´¡çŒ®æŒ‡å—

å¦‚æœä½ æƒ³æ·»åŠ æ–°å·¥å…·æˆ–æ”¹è¿›ç°æœ‰å·¥å…·ï¼š

1. åœ¨`tools/`ç›®å½•åˆ›å»ºæ–°å·¥å…·
2. æ›´æ–°æœ¬README
3. æ·»åŠ ä½¿ç”¨ç¤ºä¾‹
4. æäº¤PR

---

## ğŸ“ è·å–å¸®åŠ©

**é‡åˆ°é—®é¢˜ï¼Ÿ**

1. æŸ¥çœ‹å·¥å…·çš„`--help`é€‰é¡¹
2. é˜…è¯»ç›¸å…³æ–‡æ¡£
3. åœ¨å·¥ä½œç¾¤æé—®
4. åˆ›å»ºGitHub Issue

---

**åˆ›å»ºæ—¥æœŸ**: 2025å¹´10æœˆ23æ—¥  
**ç»´æŠ¤è€…**: OTLP Rust Team  
**çŠ¶æ€**: âœ… å°±ç»ª  

ğŸ”§ **è®©å¼€å‘æ›´é«˜æ•ˆï¼** ğŸš€

